dbLMS=lms_lagos_08122015

dbDGE=dge_lagos_08122015

dbSLE=

dbPMS=

dbIPE=

VerificationCountWithDB=

#========== ValueLabs========================

RetActivityAny=select abc.nn,xyz.name,abc.cc,abc.se,abc.ve,if(abc.sc is NULL,'',abc.sc) av,abc.st,if(abc.hbt is null,'',DATE_FORMAT(abc.hbt,'%Y-%m-%d %H-%i-%s')) hb,if(abc.lln is null , '',DATE_FORMAT(abc.lln,'%Y-%m-%d %H-%i-%s')) ll,if(abc.stt is null , '',DATE_FORMAT(abc.stt,'%Y-%m-%d %H-%i-%s')) sa,if(abc.pwt is null,'',DATE_FORMAT(abc.pwt,'%Y-%m-%d %H-%i-%s')) pw from st_lms_organization_master xyz inner join (select om.parent_id,om.name nn,om.city cc,if(rom.serial_number=-1 OR rom.device_type=-1,'NA-NA',concat(rom.device_type,'-',rom.serial_number)) se,rom.current_version ve,rom.last_connected_through sc,om.organization_status st,rom.last_HBT_time hbt,rom.last_login_time lln,rom.dg_last_sale_time stt,rom.dg_last_pwt_time pwt from st_lms_ret_offline_master rom inner join st_lms_organization_master om on rom.organization_id=om.organization_id where rom.serial_number!='-1' AND om.organization_status <>'TERMINATE') abc on abc.parent_id=xyz.organization_id order by name,nn ASC;


RetActivityLogin=select abc.nn,xyz.name,abc.cc,abc.se,abc.ve,if(abc.sc is NULL,'',abc.sc) av,abc.st,abc.ls,if(abc.hbt is null,'',DATE_FORMAT(abc.hbt,'%Y-%m-%d %H-%i-%s')) hb,if(abc.lln is null , '',DATE_FORMAT(abc.lln,'%Y-%m-%d %H-%i-%s')) ll,if(abc.stt is null , '',DATE_FORMAT(abc.stt,'%Y-%m-%d %H-%i-%s')) sa,if(abc.pwt is null,'',DATE_FORMAT(abc.pwt,'%Y-%m-%d %H-%i-%s')) pw from st_lms_organization_master xyz inner join (select om.parent_id,om.name nn,om.city cc,if(rom.serial_number=-1 OR rom.device_type=-1,'NA-NA',concat(rom.device_type,'-',rom.serial_number)) se,rom.current_version ve,rom.last_connected_through sc,om.organization_status st,rom.last_HBT_time hbt,rom.last_login_time lln,rom.login_status ls,rom.dg_last_sale_time stt,rom.dg_last_pwt_time pwt from st_lms_ret_offline_master rom inner join st_lms_organization_master om on rom.organization_id=om.organization_id where rom.serial_number!='-1' AND om.organization_status <>'TERMINATE') abc on abc.parent_id=xyz.organization_id order by name,nn ASC;

RetTerminate=select abc.nn,xyz.name,abc.cc,abc.se,abc.ve,abc.sc,abc.st,DATE_FORMAT(abc.hbt,'%Y-%m-%d %H-%i-%s') hb,DATE_FORMAT(abc.lln,'%Y-%m-%d %H-%i-%s') ll,DATE_FORMAT(abc.lln,'%Y-%m-%d %H-%i-%s') ls,DATE_FORMAT(abc.stt,'%Y-%m-%d %H-%i-%s') st,DATE_FORMAT(abc.pwt,'%Y-%m-%d %H-%i-%s') pw from st_lms_organization_master xyz inner join (select om.parent_id,om.name nn,om.city cc,if(rom.serial_number=-1,'NA-NA',concat(rom.device_type,'-',rom.serial_number)) se,rom.current_version ve,rom.last_connected_through sc,om.organization_status st,rom.last_HBT_time hbt,rom.last_login_time lln,rom.dg_last_sale_time stt,rom.dg_last_pwt_time pwt from st_lms_ret_offline_master rom inner join st_lms_organization_master om on rom.organization_id=om.organization_id where organization_status='terminate') abc on abc.parent_id=xyz.organization_id order by name,nn ASC;

Edit_Agent_Privileges_TC_7_1=select distinct pr.status ,(pr.group_name) from st_lms_user_priv_mapping upm,st_lms_priviledge_rep as pr,(select distinct(upm.priv_id) from st_lms_role_priv_mapping rpm,st_lms_user_priv_mapping upm where upm.user_id=14745 and upm.role_id=2 and rpm.status='ACTIVE' and upm.status='ACTIVE'and upm.role_id=rpm.role_id and upm.service_mapping_id=2) result where upm.user_id=14745 and upm.priv_id=pr.priv_id and pr.status='ACTIVE' and result.priv_id=pr.priv_id and pr.group_name like  ('%Payment:%') order by related_to,group_name;

RetNoTerminal=select abc.nn,xyz.name,abc.cc,abc.se,abc.ve,if(abc.sc is NULL,'',abc.sc) av,abc.st,if(abc.hbt is null,'',DATE_FORMAT(abc.hbt,'%Y-%m-%d %H-%i-%s')) hb,if(abc.lln is null , '',DATE_FORMAT(abc.lln,'%Y-%m-%d %H-%i-%s')) ll,if(abc.stt is null , '',DATE_FORMAT(abc.stt,'%Y-%m-%d %H-%i-%s')) sa,if(abc.pwt is null,'',DATE_FORMAT(abc.pwt,'%Y-%m-%d %H-%i-%s')) pw from st_lms_organization_master xyz inner join (select om.parent_id,om.name nn,om.city cc,if(rom.serial_number=-1,'NA-NA',concat(rom.device_type,'-',rom.serial_number)) se,rom.current_version ve,rom.last_connected_through sc,om.organization_status st,rom.last_HBT_time hbt,rom.last_login_time lln,rom.dg_last_sale_time stt,rom.dg_last_pwt_time pwt from st_lms_ret_offline_master rom inner join st_lms_organization_master om on rom.organization_id=om.organization_id where  rom.serial_number='-1') abc on abc.parent_id=xyz.organization_id order by name,nn   ASC;

ChromePayRcpt7=select addr_line1 FROM st_lms_organization_master WHERE NAME=

ChromePayRcpt8=select addr_line2 FROM st_lms_organization_master WHERE NAME=

ChromePayRcpt9=select city FROM st_lms_organization_master WHERE NAME=

PayRcpt=select if(rs1.transaction_type='CASH','Cash Collection',NULL) txn_type, date_format((rs1.transaction_date),'%d-%m-%Y'), rs2.amount from (select transaction_id, transaction_type, transaction_date from st_lms_bo_transaction_master where transaction_id in(select transaction_id from st_lms_bo_receipts_trn_mapping where receipt_id in(select receipt_id  from st_lms_bo_receipts where party_id in(select organization_id from st_lms_organization_master where name=

PayRcpt1=))) order by transaction_id desc limit 1) rs1  inner join  (select amount, transaction_id from st_lms_bo_cash_transaction where transaction_id in(select transaction_id from st_lms_bo_receipts_trn_mapping where receipt_id in(select receipt_id  from st_lms_bo_receipts where party_id in(select organization_id from st_lms_organization_master where name='coral'))) order by transaction_id desc limit 1)rs2 on rs1.transaction_id=rs2.transaction_id;

26_ticketMsg=select  ticket_number, total_amount from ge_tickets_1 where ticket_number=

27_ticketMsg=select ticket_number, total_amount,is_quick_pick from ge_tickets_1 where ticket_number=

TC30_ticketMsg=select ab.msg_text as'TOP MESSAGE' from lms_test.st_dg_adv_msg_master ab join lms_test.st_dg_adv_msg_org_mapping cd on ab.msg_id=cd.msg_id where ab.msg_location='TOP' and cd.game_id In (select game_id as 'Game_Id' from dge_test.game_master where game_no in(select a.game_no from(select substring('

TC30_ticketMsg1=',6,1) as 'game_no')a)) 

TC30_orgName=select value from lms_test.st_lms_property_master where property_display_name='Organization Name'

TC30_gameName=select game_name ,game_id from game_master where game_id in (select game_id as 'Game_Id' from dge_test.game_master where game_no in  (select a.game_no from(select substring('

TC30_gameName1=',6,1) as 'game_no') a  ))

TC30_gameId=select game_id from game_master where game_id in (select game_id as 'Game_Id' from dge_test.game_master where game_no in  (select a.game_no from(select substring('

TC30_gameId1=',6,1) as 'game_no') a  ))

TC30_ticketNum=select concat(ticket_number,rpc_total) as 'ticket_number' from dge_test.ge_tickets_1 where ticket_number =(select substring('

TC30_ticketNum1=',1,17) as 'ticket_number')   group by  ticket_number

TC30_drawId=select draw_id_list as 'Draw Id' from dge_test.ge_tickets_1 where ticket_number = (select substring('

TC30_drawId1=',1,17));

TC30_saleDateTime=select date_format(date(purchase_time),'%d-%m-%Y') as 'Sale Date' ,time(purchase_time) as'Sale Time' from dge_test.ge_tickets_1 where ticket_number =(select substring('

TC30_saleDateTime1=',1,17) )   group by  ticket_number

TC30_saleDateTime2=select time(purchase_time) as'Sale Time' from dge_test.ge_tickets_1 where ticket_number =(select ticket_number from(select substring('

TC30_saleDateTime3=',1,17) as 'ticket_number')aa )   group by  ticket_number

TC30_saleDate=select date_format(date(purchase_time),'%d-%m-%Y') as 'Sale Date' ,time(purchase_time) as'Sale Time' from dge_test.ge_tickets_1 where ticket_number =(select substring('

TC30_saleDate1=',1,17) as 'ticket_number')  group by  ticket_number

TC30_drawDateTime=select date_format(date(draw_datetime),'%d-%m-%Y')  as 'Draw Date'  from dge_test.ge_draw_master_1 where draw_id =

TC30_drawDateTime1=select time(draw_datetime) as'Draw Time' from dge_test.ge_draw_master_1 where draw_id =

TC30_panelData=select  player_picked_data as 'panel data'  from dge_test.ge_tickets_1 where ticket_number  =(select substring('

TC30_panelData1=',1,17) as 'ticket_number')  group by  ticket_number

TC30_totalQty=1',1,17) as 'ticket_number')aa )   group by  ticket_number

TC30_unitPrice=select unit_price as'Unit Price(USD)' from dge_test.ge_draw_ticket_

TC30_unitPrice1= where ticket_number  = (select substring('

TC30_unitPrice2=',1,17) as 'ticket_number')   group by  ticket_number

TC30_totAmt=select sum(bet_amount_multiple*unit_price) as 'Total Amount(USD)' from dge_test.ge_draw_ticket_

TC30_totAmt1= where ticket_number  = (select substring('

TC30_totAmt2=',1,17) as 'ticket_number')   group by  ticket_number

TC30_noOfDraws=SELECT(LENGTH(draw_id_list)-LENGTH(REPLACE(draw_id_list,",",""))+ 1) AS 'No. of Draws ' from dge_test.ge_tickets_1 where ticket_number=(select substring('

TC30_noOfDraws1=',1,17) as 'ticket_number') group by ticket_number

TC30_botTicNo=select concat(ticket_number,rpc_total) as 'ticket_number' from dge_test.ge_tickets_1 where ticket_number = (select ticket_number from(select substring('

TC30_botTicNo1=',1,17) as 'ticket_number')aa )  group by  ticket_number

TC30_botMsg=select ab.msg_text as'BOTTOM MESSAGE' from lms_test.st_dg_adv_msg_master ab join lms_test.st_dg_adv_msg_org_mapping cd on ab.msg_id=cd.msg_id where ab.msg_location='BOTTOM' and ab.status<>'INACTIVE' and cd.game_id in (select game_id as 'Game_Id' from dge_test.game_master where game_no in  (select a.game_no from(select substring('

TC30_botMsg1=',6,1) as 'game_no') a  )) 

TC30_numOfLines=select num_of_lines as 'No. of line(s)' from dge_test.ge_tickets_1 where ticket_number  =(select substring('

TC30_numOfLines1=',1,17) as 'ticket_number')  group by  ticket_number

TC30_playType=select  replace(play_type,'Perm','Pick')as 'play  Type' from dge_test.ge_tickets_1 where ticket_number  =(select substring('

TC30_playType1=',1,17) as 'ticket_number')  group by  ticket_number

TC30_purchase_Table=select purchase_table_name as 'Purchase Table' from dge_test.ge_draw_master_1 where draw_id=

DBConnDgeUser=vlab

DBConnDgePwd=zaqwsx23

DBConnDgeDriver=com.mysql.jdbc.Driver

#========== /ValueLabs========================

urlLogin=http://192.168.124.115:8080/LMSLinuxNew/com/skilrock/lms/embedded/loginMgmt/Login.action?username=retrb&password=12345678&deviceType=iWL220&terminalId=860041023232690&version=10.01&profile=SKILROCK&simType=MTN&lastMsgId=0&LSTktNo=0

urlSale=http://192.168.124.115:8080/LMSLinuxNew/com/skilrock/lms/embedded/drawGames/kenoFourBuy.action?noOfPanel=1&pickedNumbers=01,02&noOfDraws=1&totalPurchaseAmt=10.00&noPicked=2&playType=Direct2&QP=2&betAmt=1&isAdvancedPlay=0&userName=retrb&LRespTime=2&CRC=2107363799&reqCounter=41&respCounter=41&LSTktNo=0

urlLogout=http://192.168.124.115:8080/LMSLinuxNew/com/skilrock/lms/embedded/loginMgmt/Logout.action?userName=retrb&reqCounter=1&respCounter=1&LSTktNo=0

urlTktCancel=http://192.168.124.115:8080/LMSLinuxNew/com/skilrock/lms/embedded/drawGames/cancelTicket.action?autoCancel=false&cancelType=manual&userName=retrb&terminal_str=-1&server_ster=-1&reqCounter=17&LSTktNo=keyTicketNo

urlReprint=http://192.168.124.115:8080/LMSLinuxNew/com/skilrock/lms/embedded/drawGames/reprintTicket.action?userName=retrb&LRespTime=6&reqCounter=3&respCounter=3&LSTktNo=keyTicketNo&time=08:40:43&date=11-09-2015&random=529

urlSale1=http://192.168.124.115:8080/LMSLinuxNew/com/skilrock/lms/embedded/drawGames/kenoFourBuy.action?noOfPanel=1&pickedNumbers=01&noOfDraws=1&totalPurchaseAmt=50.00&noPicked=1&playType=Direct1&QP=2&betAmt=1&isAdvancedPlay=0&userName=retrb&LRespTime=4&CRC=3139248107&reqCounter=8&respCounter=8&LSTktNo=0

urlSale2=http://192.168.124.115:8080/LMSLinuxNew/com/skilrock/lms/embedded/drawGames/kenoFourBuy.action?noOfPanel=5&pickedNumbers=01Nxt01,02Nxt01,02,03Nxt01,02,03,04Nxt01,02,03,04,05&noOfDraws=1&totalPurchaseAmt=50.00&noPicked=1Nxt2Nxt3Nxt4Nxt5&playType=Direct1NxtDirect2NxtDirect3NxtDirect4NxtDirect5&QP=2Nxt2Nxt2Nxt2Nxt2&betAmt=1Nxt1Nxt1Nxt1Nxt1&isAdvancedPlay=0&userName=retrb&LRespTime=15&CRC=3644669298&reqCounter=12&respCounter=12&LSTktNo0

urlSale3=http://192.168.124.115:8080/LMSLinuxNew/com/skilrock/lms/embedded/drawGames/kenoFourBuy.action?noOfPanel=4&pickedNumbers=01,02,03,04,05Nxt01,02,03,04,05Nxt01,UL,02,BLNxt01&noOfDraws=1&totalPurchaseAmt=550.00&noPicked=5Nxt5Nxt1,1Nxt1&playType=Perm2NxtPerm3NxtBankerNxtBanker1AgainstAll&QP=2Nxt2Nxt2Nxt2&betAmt=1Nxt1Nxt1Nxt1&isAdvancedPlay=0&userName=retrb&LRespTime=15&CRC=303146778&reqCounter=16&respCounter=16&LSTktNo=0

urlSale4=http://192.168.124.115:8080/LMSLinuxNew/com/skilrock/lms/embedded/drawGames/kenoFourBuy.action?noOfPanel=1&pickedNumbers=01,02&noOfDraws=1&totalPurchaseAmt=10.00&noPicked=2&playType=DC-Direct2&QP=2&betAmt=1&isAdvancedPlay=0&userName=retrb&LRespTime=7&CRC=3414091489&reqCounter=28&respCounter=28&LSTktNo=0

urlSale5=http://192.168.124.115:8080/LMSLinuxNew/com/skilrock/lms/embedded/drawGames/kenoFourBuy.action?noOfPanel=1&pickedNumbers=QP&noOfDraws=1&totalPurchaseAmt=10.00&noPicked=2&playType=DC-Direct2&QP=1&betAmt=1&isAdvancedPlay=0&userName=retrb&LRespTime=3&CRC=1550371925&reqCounter=69&respCounter=69&LSTktNo=0

urlSale6=http://192.168.124.115:8080/LMSLinuxNew/com/skilrock/lms/embedded/drawGames/kenoFourBuy.action?noOfPanel=1&pickedNumbers=01,02,03,04,05&noOfDraws=1&totalPurchaseAmt=50.00&noPicked=5&playType=DC-Perm2&QP=2&betAmt=1&isAdvancedPlay=0&userName=retrb&LRespTime=17&CRC=2591478252&reqCounter=70&respCounter=70&LSTktNo=0

urlSale7=http://192.168.124.115:8080/LMSLinuxNew/com/skilrock/lms/embedded/drawGames/kenoFourBuy.action?noOfPanel=1&pickedNumbers=QP&noOfDraws=1&totalPurchaseAmt=50.00&noPicked=5&playType=DC-Perm2&QP=1&betAmt=1&isAdvancedPlay=0&userName=retrb&LRespTime=13&CRC=387528040&reqCounter=71&respCounter=71&LSTktNo=0

urlSale8=http://192.168.124.115:8080/LMSLinuxNew/com/skilrock/lms/embedded/drawGames/kenoFourBuy.action?noOfPanel=1&pickedNumbers=01&noOfDraws=1&totalPurchaseAmt=10.00&noPicked=1&playType=Direct1&QP=2&betAmt=1&isAdvancedPlay=0&userName=retrb&LRespTime=0&CRC=3139248107&reqCounter=6&respCounter=6&LSTktNo=0

urlSale9=http://192.168.124.115:8080/LMSLinuxNew/com/skilrock/lms/embedded/drawGames/kenoFourBuy.action?noOfPanel=1&pickedNumbers=QP&noOfDraws=1&totalPurchaseAmt=10.00&noPicked=1&playType=Direct1&QP=1&betAmt=1&isAdvancedPlay=0&userName=retrb&LRespTime=6&CRC=3458262338&reqCounter=7&respCounter=7&LSTktNo=0

urlSale10=http://192.168.124.115:8080/LMSLinuxNew/com/skilrock/lms/embedded/drawGames/kenoFourBuy.action?noOfPanel=1&pickedNumbers=01,02&noOfDraws=1&totalPurchaseAmt=10.00&noPicked=2&playType=Direct2&QP=2&betAmt=1&isAdvancedPlay=0&userName=retrb&LRespTime=2&CRC=2107363799&reqCounter=41&respCounter=41&LSTktNo=0

urlSale11=http://192.168.124.115:8080/LMSLinuxNew/com/skilrock/lms/embedded/drawGames/kenoFourBuy.action?noOfPanel=1&pickedNumbers=QP&noOfDraws=1&totalPurchaseAmt=10.00&noPicked=2&playType=Direct2&QP=1&betAmt=1&isAdvancedPlay=0&userName=retrb&LRespTime=8&CRC=3651580699&reqCounter=42&respCounter=42&LSTktNo=0

urlSale12=http://192.168.124.115:8080/LMSLinuxNew/com/skilrock/lms/embedded/drawGames/kenoFourBuy.action?noOfPanel=1&pickedNumbers=01,02,03&noOfDraws=1&totalPurchaseAmt=10.00&noPicked=3&playType=Direct3&QP=2&betAmt=1&isAdvancedPlay=0&userName=retrb&LRespTime=18&CRC=650771604&reqCounter=43&respCounter=43&LSTktNo=0

urlSale13=http://192.168.124.115:8080/LMSLinuxNew/com/skilrock/lms/embedded/drawGames/kenoFourBuy.action?noOfPanel=1&pickedNumbers=QP&noOfDraws=1&totalPurchaseAmt=10.00&noPicked=3&playType=Direct3&QP=1&betAmt=1&isAdvancedPlay=0&userName=retrb&LRespTime=49&CRC=1644921619&reqCounter=47&respCounter=47&LSTktNo=0

urlSale14=http://192.168.124.115:8080/LMSLinuxNew/com/skilrock/lms/embedded/drawGames/kenoFourBuy.action?noOfPanel=1&pickedNumbers=01,02,03,04&noOfDraws=1&totalPurchaseAmt=10.00&noPicked=4&playType=Direct4&QP=2&betAmt=1&isAdvancedPlay=0&userName=retrb&LRespTime=13&CRC=2024336567&reqCounter=48&respCounter=48&LSTktNo=0

urlSale15=http://192.168.124.115:8080/LMSLinuxNew/com/skilrock/lms/embedded/drawGames/kenoFourBuy.action?noOfPanel=1&pickedNumbers=QP&noOfDraws=1&totalPurchaseAmt=10.00&noPicked=4&playType=Direct4&QP=1&betAmt=1&isAdvancedPlay=0&userName=retrb&LRespTime=9&CRC=4138344361&reqCounter=49&respCounter=49&LSTktNo=0

urlSale16=http://192.168.124.115:8080/LMSLinuxNew/com/skilrock/lms/embedded/drawGames/kenoFourBuy.action?noOfPanel=1&pickedNumbers=01,02,03,04,05&noOfDraws=1&totalPurchaseAmt=10.00&noPicked=5&playType=Direct5&QP=2&betAmt=1&isAdvancedPlay=0&userName=retrb&LRespTime=9&CRC=720264894&reqCounter=51&respCounter=51&LSTktNo=0

urlSale17=http://192.168.124.115:8080/LMSLinuxNew/com/skilrock/lms/embedded/drawGames/kenoFourBuy.action?noOfPanel=1&pickedNumbers=QP&noOfDraws=1&totalPurchaseAmt=10.00&noPicked=5&playType=Direct5&QP=1&betAmt=1&isAdvancedPlay=0&userName=retrb&LRespTime=5&CRC=1292316577&reqCounter=52&respCounter=52&LSTktNo=0

urlSale18=http://192.168.124.115:8080/LMSLinuxNew/com/skilrock/lms/embedded/drawGames/kenoFourBuy.action?noOfPanel=1&pickedNumbers=01,02,03,04,05&noOfDraws=1&totalPurchaseAmt=50.00&noPicked=5&playType=Perm2&QP=2&betAmt=1&isAdvancedPlay=0&userName=retrb&LRespTime=7&CRC=2782659679&reqCounter=53&respCounter=53&LSTktNo=0

urlSale19=http://192.168.124.115:8080/LMSLinuxNew/com/skilrock/lms/embedded/drawGames/kenoFourBuy.action?noOfPanel=1&pickedNumbers=QP&noOfDraws=1&totalPurchaseAmt=50.00&noPicked=5&playType=Perm2&QP=1&betAmt=1&isAdvancedPlay=0&userName=retrb&LRespTime=7&CRC=4040581942&reqCounter=56&respCounter=56&LSTktNo=0

urlSale20=http://192.168.124.115:8080/LMSLinuxNew/com/skilrock/lms/embedded/drawGames/kenoFourBuy.action?noOfPanel=1&pickedNumbers=01,02,03,04,05&noOfDraws=1&totalPurchaseAmt=50.00&noPicked=5&playType=Perm3&QP=2&betAmt=1&isAdvancedPlay=0&userName=retrb&LRespTime=5&CRC=3537581257&reqCounter=57&respCounter=57&LSTktNo=0

urlSale21=http://192.168.124.115:8080/LMSLinuxNew/com/skilrock/lms/embedded/drawGames/kenoFourBuy.action?noOfPanel=1&pickedNumbers=QP&noOfDraws=1&totalPurchaseAmt=50.00&noPicked=5&playType=Perm3&QP=1&betAmt=1&isAdvancedPlay=0&userName=retrb&LRespTime=8&CRC=2278642592&reqCounter=58&respCounter=58&LSTktNo=0

urlSale22=http://192.168.124.115:8080/LMSLinuxNew/com/skilrock/lms/embedded/drawGames/kenoFourBuy.action?noOfPanel=1&pickedNumbers=01,UL,02,BL&noOfDraws=1&totalPurchaseAmt=5.00&noPicked=1,1&playType=Banker&QP=2&betAmt=1&isAdvancedPlay=0&userName=retrb&LRespTime=5&CRC=829739212&reqCounter=59&respCounter=59&LSTktNo=0

urlSale23=http://192.168.124.115:8080/LMSLinuxNew/com/skilrock/lms/embedded/drawGames/kenoFourBuy.action?noOfPanel=1&pickedNumbers=QP&noOfDraws=1&totalPurchaseAmt=10.00&noPicked=1,2&playType=Banker&QP=1&betAmt=1&isAdvancedPlay=0&userName=retrb&LRespTime=4&CRC=485817386&reqCounter=60&respCounter=60&LSTktNo=0

urlSale24=http://192.168.124.115:8080/LMSLinuxNew/com/skilrock/lms/embedded/drawGames/kenoFourBuy.action?noOfPanel=1&pickedNumbers=01&noOfDraws=1&totalPurchaseAmt=445.00&noPicked=1&playType=Banker1AgainstAll&QP=2&betAmt=1&isAdvancedPlay=0&userName=retrb&LRespTime=4&CRC=337516944&reqCounter=64&respCounter=64&LSTktNo=0

urlSale25=http://192.168.124.115:8080/LMSLinuxNew/com/skilrock/lms/embedded/drawGames/kenoFourBuy.action?noOfPanel=1&pickedNumbers=QP&noOfDraws=1&totalPurchaseAmt=445.00&noPicked=1&playType=Banker1AgainstAll&QP=1&betAmt=1&isAdvancedPlay=0&userName=retrb&LRespTime=16&CRC=3792947375&reqCounter=65&respCounter=65&LSTktNo=0

urlSale26=http://192.168.124.115:8080/LMSLinuxNew/com/skilrock/lms/embedded/drawGames/TwelveByTwentyFourBuy.action?noOfPanel=1&pickedNumbers=01,02,03,04,05,06,07,08,09,10,11,12&noOfDraws=1&totalPurchaseAmt=10.00&noPicked=12&playType=Direct12&QP=2&betAmt=1&isAdvancedPlay=0&userName=retrb&LRespTime=6&CRC=4238519842&reqCounter=29&respCounter=29&LSTktNo=0

urlSale27=http://192.168.124.115:8080/LMSLinuxNew/com/skilrock/lms/embedded/drawGames/TwelveByTwentyFourBuy.action?noOfPanel=1&pickedNumbers=QP&noOfDraws=1&totalPurchaseAmt=10.00&noPicked=12&playType=Direct12&QP=1&betAmt=1&isAdvancedPlay=0&userName=retrb&LRespTime=3&CRC=4083373055&reqCounter=30&respCounter=30&LSTktNo=0

urlSale28=http://192.168.124.115:8080/LMSLinuxNew/com/skilrock/lms/embedded/drawGames/TwelveByTwentyFourBuy.action?noOfPanel=1&pickedNumbers=QP&noOfDraws=1&totalPurchaseAmt=10.00&noPicked=12&playType=First12&QP=1&betAmt=1&isAdvancedPlay=0&userName=retrb&LRespTime=5&CRC=986415459&reqCounter=31&respCounter=31&LSTktNo=0

urlSale29=http://192.168.124.115:8080/LMSLinuxNew/com/skilrock/lms/embedded/drawGames/TwelveByTwentyFourBuy.action?noOfPanel=1&pickedNumbers=QP&noOfDraws=1&totalPurchaseAmt=10.00&noPicked=12&playType=Last12&QP=1&betAmt=1&isAdvancedPlay=0&userName=retrb&LRespTime=2&CRC=1235562184&reqCounter=99&respCounter=99&LSTktNo=0

urlSale30=http://192.168.124.115:8080/LMSLinuxNew/com/skilrock/lms/embedded/drawGames/TwelveByTwentyFourBuy.action?noOfPanel=1&pickedNumbers=QP&noOfDraws=1&totalPurchaseAmt=10.00&noPicked=12&playType=AllOdd&QP=1&betAmt=1&isAdvancedPlay=0&userName=retrb&LRespTime=2&CRC=1747708367&reqCounter=100&respCounter=100&LSTktNo=0

urlSale31=http://192.168.124.115:8080/LMSLinuxNew/com/skilrock/lms/embedded/drawGames/TwelveByTwentyFourBuy.action?noOfPanel=1&pickedNumbers=QP&noOfDraws=1&totalPurchaseAmt=10.00&noPicked=12&playType=AllEven&QP=1&betAmt=1&isAdvancedPlay=0&userName=retrb&LRespTime=4&CRC=448786721&reqCounter=101&respCounter=101&LSTktNo=0

urlSale32=http://192.168.124.115:8080/LMSLinuxNew/com/skilrock/lms/embedded/drawGames/TwelveByTwentyFourBuy.action?noOfPanel=1&pickedNumbers=QP&noOfDraws=1&totalPurchaseAmt=10.00&noPicked=12&playType=EvenOdd&QP=1&betAmt=1&isAdvancedPlay=0&userName=retrb&LRespTime=13&CRC=3840587969&reqCounter=103&respCounter=103&LSTktNo=0

urlSale33=http://192.168.124.115:8080/LMSLinuxNew/com/skilrock/lms/embedded/drawGames/TwelveByTwentyFourBuy.action?noOfPanel=1&pickedNumbers=QP&noOfDraws=1&totalPurchaseAmt=65.00&noPicked=13&playType=Perm12&QP=1&betAmt=1&isAdvancedPlay=0&userName=retrb&LRespTime=9&CRC=3306012358&reqCounter=110&respCounter=110&LSTktNo=0

SearchUser1=select concat(b.first_name,' ',b.last_name) as Name,case a.isrolehead when 'Y' then 'Head' when 'N' then 'Not Head' end as 'User Type',c.role_description as Department,a.isrolehead as 'Report Mailing',a.status as Status, um.user_name as DoneBy,DATE_FORMAT(a.registration_date , '%Y-%m-%d %h:%i:%s') as registrationDate from dbLMS.st_lms_user_master a INNER JOIN dbLMS.st_lms_user_master um ON a.register_by_id = um.user_id,st_lms_user_contact_details b,st_lms_role_master c where a.user_id= b.user_id and a.role_id=c.role_id and a.organization_type='BO'  and  a.status='ACTIVE' order by b.first_name,b.last_name, binary(b.first_name) asc;

SearchUser2=select concat(b.first_name,' ',b.last_name) as Name,case a.isrolehead when 'Y' then 'Head' when 'N' then 'Not Head' end as 'User Type',c.role_description as Department,a.isrolehead as 'Report Mailing',a.status as Status, um.user_name as DoneBy,DATE_FORMAT(a.registration_date ,'%Y-%m-%d %h\:%i\:%s') as registrationDate from dbLMS.st_lms_user_master a INNER JOIN dbLMS.st_lms_user_master um ON a.register_by_id = um.user_id,st_lms_user_contact_details b,st_lms_role_master c where a.user_id= b.user_id and a.role_id=c.role_id and a.organization_type='BO'  and  a.status='INACTIVE' order by b.first_name,b.last_name,STR_TO_DATE(a.registration_date,'%Y-%m-%d') ASC;

SearchUser3=select concat(b.first_name,' ',b.last_name) as Name,case a.isrolehead when 'Y' then 'Head' when 'N' then 'Not Head' end as 'User Type',c.role_description as Department,a.isrolehead as 'Report Mailing',a.status as Status, um.user_name as DoneBy,DATE_FORMAT(a.registration_date , '%Y-%m-%d %h\:%i\:%s') as registrationDate from dbLMS.st_lms_user_master a INNER JOIN dbLMS.st_lms_user_master um ON a.register_by_id = um.user_id,st_lms_user_contact_details b,st_lms_role_master c where a.user_id= b.user_id and a.role_id=c.role_id and a.organization_type='BO'  and  a.status='INACTIVE' and c.role_description='Operation' order by b.first_name,b.last_name,STR_TO_DATE(a.registration_date,'%Y-%m-%d') ASC;

SearchUser4=Select b.status from dbLMS.st_lms_user_contact_details a inner join dbLMS.st_lms_user_master b on a.user_id=b.user_id where a.email_id='keyEmail' and status = 'INACTIVE';

SearchUser5=Select b.password from dbLMS.st_lms_user_contact_details a inner join dbLMS.st_lms_user_master b on a.user_id=b.user_id where a.email_id='keyEmail';

SearchUser6=Select b.login_attempts from dbLMS.st_lms_user_contact_details a inner join dbLMS.st_lms_user_master b on a.user_id=b.user_id where a.email_id='keyEmail';

SearchUser7=UPDATE dbLMS.st_lms_user_master b JOIN dbLMS.st_lms_user_contact_details p ON p.user_id = b.user_id SET b.status = 'ACTIVE' WHERE p.email_id='keyEmail';

SearchUser8=SELECT role_description FROM dbLMS.st_lms_role_master where tier_id=1;

RoleHeadRegistration1=Update dbLMS.st_lms_user_master set password='JdVa0oOqQAr0ZMdtcTwHrQ==' where user_name='KeyuserName';

RoleHeadRegistration2=Update dbLMS.st_lms_user_master set auto_password='0' where user_name='KeyuserName';

RoleHeadOrganisation=SELECT NAME FROM dbLMS.st_lms_organization_master WHERE organization_type ='BO' ORDER BY NAME ASC;

RoleHeadRoleTable=SELECT role_name FROM dbLMS.st_lms_role_master where is_master='N';

RoleHeadUNVerification=Select USER_NAME from  dbLMS.st_lms_user_master where isrolehead='Y' and user_name='KeyuserName';

RoleHeadFNVerification=select b.first_name from dbLMS.st_lms_user_contact_details b inner join dbLMS.st_lms_user_master a on a.user_id=b.user_id where user_name='KeyuserName';

RoleHeadLNVerification=select b.last_name from dbLMS.st_lms_user_contact_details b inner join dbLMS.st_lms_user_master a on a.user_id=b.user_id where user_name='KeyuserName';

RoleHeadEmailVerification=select b.email_id from dbLMS.st_lms_user_contact_details b inner join dbLMS.st_lms_user_master a on a.user_id=b.user_id where user_name='KeyuserName';

RoleHeadPhoneVerification=select b.phone_nbr from dbLMS.st_lms_user_contact_details b inner join dbLMS.st_lms_user_master a on a.user_id=b.user_id where user_name='KeyuserName';

IpTimeLimitation1=select monday_start_time from dbLMS.st_lms_user_ip_time_mapping where user_id=(Select user_id from dbLMS.st_lms_user_master WHERE user_name='keyOrgName');

IpTimeLimitation2=select monday_end_time from dbLMS.st_lms_user_ip_time_mapping where user_id=(Select user_id from dbLMS.st_lms_user_master WHERE user_name='keyOrgName');

IpTimeLimitation3=select friday_start_time from dbLMS.st_lms_user_ip_time_mapping where user_id=(Select user_id from dbLMS.st_lms_user_master WHERE user_name='keyOrgName');

IpTimeLimitation4=select friday_end_time from dbLMS.st_lms_user_ip_time_mapping where user_id=(Select user_id from dbLMS.st_lms_user_master WHERE user_name='keyOrgName');

AssignPayoutCenterListOrder=select name from dbLMS.st_lms_organization_master where organization_type='agent' and organization_status!='TERMINATE' order by name ;

AssignPayoutCenterNewRet=select round(a.block_amt,1) from dbLMS.st_lms_oranization_limits a inner join dbLMS.st_lms_organization_master b on a.organization_id=b.organization_id where organization_type='agent' and organization_status!='TERMINATE'and b.name='Keynewret';
AssignPayoutCenterNewRet1=select a.block_days from lms_lagos_08122015.st_lms_oranization_limits a inner join lms_lagos_08122015.st_lms_organization_master b on a.organization_id=b.organization_id where organization_type='agent' and organization_status!='TERMINATE' and b.name='Keynewret';
AssignPayoutCenterNewRet2=select round(a.block_amt,1) from lms_lagos_08122015.st_lms_oranization_limits a inner join lms_lagos_08122015.st_lms_organization_master b on a.organization_id=b.organization_id where organization_type='agent' and organization_status!='TERMINATE' and b.name='Keynewret';


AssignPayoutCenterAmount1=select round(a.block_amt,1) from dbLMS.st_lms_oranization_limits_history a inner join dbLMS.st_lms_organization_master b on a.organization_id=b.organization_id where b.name="Adewesco" order by task_id desc limit 1;

AssignPayoutCenterAmount2=select format(a.block_amt,1) from dbLMS.st_lms_oranization_limits a inner join dbLMS.st_lms_organization_master b on a.organization_id=b.organization_id where organization_type='agent' and organization_status!='TERMINATE' and b.name='keyname1';

AssignPayoutCenterAmount3=select format(a.block_amt,1) from dbLMS.st_lms_oranization_limits a inner join dbLMS.st_lms_organization_master b on a.organization_id=b.organization_id where organization_type='agent' and organization_status!='TERMINATE' and b.name='keyname2';

AssignPayoutCenterAmount4=select format(a.block_amt,1) from dbLMS.st_lms_oranization_limits a inner join dbLMS.st_lms_organization_master b on a.organization_id=b.organization_id where organization_type='agent' and organization_status!='TERMINATE' and b.name='keyname3';

HomePriviledgeAccMGMT=select distinct(group_name) from dbLMS.st_lms_priviledge_rep as pr ,dbLMS.st_lms_role_priv_mapping as rpm,dbLMS.st_lms_user_priv_mapping upm where upm.user_id=11001 and  (upm.status='ACTIVE') and upm.priv_id=rpm.priv_id and  (rpm.service_mapping_id=1 and upm.service_mapping_id=1) and (rpm.role_id=1 and upm.role_id=1) and pr.related_to = 'ACT_MGT' and  rpm.priv_id=pr.priv_id  order by related_to,group_name;

HomePriviledgeBOMGMT=select distinct(group_name) from dbLMS.st_lms_priviledge_rep as pr ,dbLMS.st_lms_role_priv_mapping as rpm,dbLMS.st_lms_user_priv_mapping upm where upm.user_id=11001 and  (upm.status='ACTIVE') and upm.priv_id=rpm.priv_id and  (rpm.service_mapping_id=1 and upm.service_mapping_id=1) and (rpm.role_id=1 and upm.role_id=1) and pr.related_to = 'BO_USER_MGT'  and  rpm.priv_id=pr.priv_id and group_name not in('Add Sub User', 'Edit Sub User Privileges', 'Role Head Registration') order by related_to,group_name;

HomePriviledgeInv=select distinct(group_name) from dbLMS.st_lms_priviledge_rep as pr ,dbLMS.st_lms_role_priv_mapping as rpm,dbLMS.st_lms_user_priv_mapping upm where upm.user_id=11001 and  (upm.status='ACTIVE') and upm.priv_id=rpm.priv_id and  (rpm.service_mapping_id=1 and upm.service_mapping_id=1) and (rpm.role_id=1 and upm.role_id=1) and pr.related_to = 'INV_MGT' and  rpm.priv_id=pr.priv_id  order by related_to,group_name;

HomePriviledgeRole=select distinct(group_name) from dbLMS.st_lms_priviledge_rep as pr ,dbLMS.st_lms_role_priv_mapping as rpm,dbLMS.st_lms_user_priv_mapping upm where upm.user_id=11001 and  (upm.status='ACTIVE') and upm.priv_id=rpm.priv_id and  (rpm.service_mapping_id=1 and upm.service_mapping_id=1) and (rpm.role_id=1 and upm.role_id=1) and pr.related_to = 'ROLE_MGT' and  rpm.priv_id=pr.priv_id  order by related_to,group_name;

HomePriviledgeUser=select distinct(group_name) from dbLMS.st_lms_priviledge_rep as pr ,dbLMS.st_lms_role_priv_mapping as rpm,dbLMS.st_lms_user_priv_mapping upm where upm.user_id=11001 and  (upm.status='ACTIVE') and upm.priv_id=rpm.priv_id and  (rpm.service_mapping_id=1 and upm.service_mapping_id=1) and (rpm.role_id=1 and upm.role_id=1) and pr.related_to = 'BO_USER_MGT' and  rpm.priv_id=pr.priv_id and group_name not in('Add Sub User', 'Edit Sub User Privileges', 'Role Head Registration')  order by related_to,group_name;

HomePriviledgeReports=select distinct(group_name) from dbLMS.st_lms_priviledge_rep as pr ,dbLMS.st_lms_role_priv_mapping as rpm,dbLMS.st_lms_user_priv_mapping upm where upm.user_id=11001 and  (upm.status='ACTIVE') and upm.priv_id=rpm.priv_id and  (rpm.service_mapping_id=1 and upm.service_mapping_id=1) and (rpm.role_id=1 and upm.role_id=1) and pr.related_to = 'REPORTS' and  rpm.priv_id=pr.priv_id  order by related_to,group_name;

DGPriviledgeDrawMGMT=select distinct(group_name) from dbLMS.st_dg_priviledge_rep as pr ,dbLMS.st_lms_role_priv_mapping as rpm,dbLMS.st_lms_user_priv_mapping upm where upm.user_id=11001 and  (upm.status='ACTIVE') and upm.priv_id=rpm.priv_id and (rpm.service_mapping_id=13 and upm.service_mapping_id=13) and pr.related_to='DRAW_MGT' and (rpm.role_id=1 and upm.role_id=1) and  rpm.priv_id=pr.priv_id  and pr.group_name not in ('Track Third Party Ticket') and pr.is_start='Y' order by related_to,group_name;

DGPriviledgePWT=select distinct(group_name) from dbLMS.st_dg_priviledge_rep as pr ,dbLMS.st_lms_role_priv_mapping as rpm,dbLMS.st_lms_user_priv_mapping upm where upm.user_id=11001 and  (upm.status='ACTIVE') and upm.priv_id=rpm.priv_id and (rpm.service_mapping_id=13 and upm.service_mapping_id=13) and pr.related_to='PWT' and (rpm.role_id=1 and upm.role_id=1) and  rpm.priv_id=pr.priv_id  and pr.is_start='Y' and group_name != 'Merchant Direct Player PWT' order by related_to,group_name;

DGPriviledgeReport=select distinct(group_name) from dbLMS.st_dg_priviledge_rep as pr ,dbLMS.st_lms_role_priv_mapping as rpm,dbLMS.st_lms_user_priv_mapping upm where upm.user_id=11001 and  (upm.status='ACTIVE') and upm.priv_id=rpm.priv_id and (rpm.service_mapping_id=13 and upm.service_mapping_id=13) and pr.related_to='REPORTS' and (rpm.role_id=1 and upm.role_id=1) and  rpm.priv_id=pr.priv_id  and pr.is_start='Y' and group_name != 'USSD Summary Report' order by related_to,group_name;

EditSubUserLst=select user_name from st_lms_user_master where parent_user_id='11001' and role_id=1 order by user_name;

EditAgentPrivileges_q1= select distinct(group_name) from dbLMS.st_lms_priviledge_rep as pr ,dbLMS.st_lms_role_priv_mapping as rpm, dbLMS.st_lms_user_priv_mapping upm where upm.user_id=(select user_id from dbLMS.st_lms_user_master where organization_id = (select organization_id from dbLMS.st_lms_organization_master where name = 'keyAgent' and isrolehead = 'Y' AND role_id =2)) and upm.priv_id=rpm.priv_id and rpm.service_mapping_id=2 and rpm.role_id=2 and  rpm.priv_id=pr.priv_id and upm.service_mapping_id=2 and upm.role_id=2 and pr.status='ACTIVE' and not pr.hidden <=> 'Y' and related_to = 'ACT_MGT' order by related_to,group_name;

EditAgentPrivileges_q2= select distinct(group_name) from dbLMS.st_lms_priviledge_rep as pr ,dbLMS.st_lms_role_priv_mapping as rpm, dbLMS.st_lms_user_priv_mapping upm where upm.user_id=(select user_id from dbLMS.st_lms_user_master where organization_id = (select organization_id from dbLMS.st_lms_organization_master where name = 'keyAgent' and isrolehead = 'Y' AND role_id =2)) and upm.priv_id=rpm.priv_id and rpm.service_mapping_id=2 and rpm.role_id=2 and  rpm.priv_id=pr.priv_id and upm.service_mapping_id=2 and upm.role_id=2 and pr.status='ACTIVE' and not pr.hidden <=> 'Y' and related_to = 'AGENT_USER_MGT' order by related_to,group_name;

EditAgentPrivileges_q3= select distinct(group_name) from dbLMS.st_lms_priviledge_rep as pr ,dbLMS.st_lms_role_priv_mapping as rpm, dbLMS.st_lms_user_priv_mapping upm where upm.user_id=(select user_id from dbLMS.st_lms_user_master where organization_id = (select organization_id from dbLMS.st_lms_organization_master where name = 'keyAgent' and isrolehead = 'Y' AND role_id =2)) and upm.priv_id=rpm.priv_id and rpm.service_mapping_id=2 and rpm.role_id=2 and  rpm.priv_id=pr.priv_id and upm.service_mapping_id=2 and upm.role_id=2 and pr.status='ACTIVE' and not pr.hidden <=> 'Y' and related_to = 'INV_MGT' order by related_to,group_name;

EditAgentPrivileges_q4= select distinct(group_name) from dbLMS.st_lms_priviledge_rep as pr ,dbLMS.st_lms_role_priv_mapping as rpm, dbLMS.st_lms_user_priv_mapping upm where upm.user_id=(select user_id from dbLMS.st_lms_user_master where organization_id = (select organization_id from dbLMS.st_lms_organization_master where name = 'keyAgent' and isrolehead = 'Y' AND role_id =2)) and upm.priv_id=rpm.priv_id and rpm.service_mapping_id=2 and rpm.role_id=2 and  rpm.priv_id=pr.priv_id and upm.service_mapping_id=2 and upm.role_id=2 and pr.status='ACTIVE' and not pr.hidden <=> 'Y' and related_to = 'REPORTS' AND group_name != 'Miscellaneous' order by related_to,group_name;

EditAgentPrivileges_q5= select distinct(group_name) from dbLMS.st_lms_priviledge_rep as pr ,dbLMS.st_lms_role_priv_mapping as rpm, dbLMS.st_lms_user_priv_mapping upm where upm.user_id=(select user_id from dbLMS.st_lms_user_master where organization_id = (select organization_id from dbLMS.st_lms_organization_master where name = 'keyAgent' and isrolehead = 'Y' AND role_id =2)) and upm.priv_id=rpm.priv_id and rpm.service_mapping_id=2 and rpm.role_id=2 and  rpm.priv_id=pr.priv_id and upm.service_mapping_id=2 and upm.role_id=2 and pr.status='ACTIVE' and not pr.hidden <=> 'Y' and related_to = 'USER_MGT'  order by related_to,group_name;

EditAgentPrivileges_7q1= select distinct pr.status,(group_name) from dbLMS.st_lms_priviledge_rep as pr ,dbLMS.st_lms_role_priv_mapping as rpm, dbLMS.st_lms_user_priv_mapping upm where upm.user_id=(select user_id from dbLMS.st_lms_user_master where organization_id = (select organization_id from dbLMS.st_lms_organization_master where name = 'keyAgent' and isrolehead = 'Y' AND role_id =2)) and upm.priv_id=rpm.priv_id and rpm.service_mapping_id=2 and rpm.role_id=2 and  rpm.priv_id=pr.priv_id and upm.service_mapping_id=2 and upm.role_id=2 and pr.status='ACTIVE' and not pr.hidden <=> 'Y' and pr.group_name not in('Miscellaneous') order by related_to,group_name;

SubUserDGPriviledgeDrawMGMT=select distinct(pr.group_name) from dbLMS.st_lms_user_priv_mapping upm,dbLMS.st_dg_priviledge_rep as pr,(select distinct(upm.priv_id) from dbLMS.st_lms_role_priv_mapping rpm,dbLMS.st_admin_user_master,dbLMS.st_lms_user_priv_mapping upm where upm.user_id=11001 and upm.role_id=1 and rpm.status='ACTIVE' and upm.status='ACTIVE'and upm.role_id=rpm.role_id and upm.service_mapping_id=13) result where upm.user_id=11001 and upm.priv_id=pr.priv_id and pr.status='ACTIVE' and result.priv_id=pr.priv_id and pr.is_start='Y' and related_to ='DRAW_MGT' order by related_to,group_name;

SubUserDGPriviledgePWT=select distinct(pr.group_name) from dbLMS.st_lms_user_priv_mapping upm,dbLMS.st_dg_priviledge_rep as pr,(select distinct(upm.priv_id) from dbLMS.st_lms_role_priv_mapping rpm,dbLMS.st_lms_user_priv_mapping upm where upm.user_id=11001 and upm.role_id=1 and rpm.status='ACTIVE' and upm.status='ACTIVE'and upm.role_id=rpm.role_id and upm.service_mapping_id=13) result where upm.user_id=11001 and upm.priv_id=pr.priv_id and pr.status='ACTIVE' and result.priv_id=pr.priv_id and pr.is_start='Y' and related_to ='PWT' order by related_to,group_name;

SubUserDGPriviledgeREPORTS=select distinct(pr.group_name) from dbLMS.st_lms_user_priv_mapping upm,dbLMS.st_dg_priviledge_rep as pr,(select distinct(upm.priv_id) from dbLMS.st_lms_role_priv_mapping rpm,dbLMS.st_lms_user_priv_mapping upm where upm.user_id=11001 and upm.role_id=1 and rpm.status='ACTIVE' and upm.status='ACTIVE'and upm.role_id=rpm.role_id and upm.service_mapping_id=13) result where upm.user_id=11001 and upm.priv_id=pr.priv_id and pr.status='ACTIVE' and result.priv_id=pr.priv_id and pr.is_start='Y' and related_to ='REPORTS' order by related_to,group_name;

SubUserUpdate1=update dbLMS.st_lms_user_master set auto_password=0 where user_name='KeyuserName';

SubUserUpdate2=update dbLMS.st_lms_user_master set password='JdVa0oOqQAr0ZMdtcTwHrQ==' where user_name='KeyuserName';

SubUserHomePriviledgeAccountMGMT=select distinct(pr.group_name) from dbLMS.st_lms_user_priv_mapping upm,dbLMS.st_lms_priviledge_rep as pr,(select distinct(upm.priv_id) from dbLMS.st_lms_role_priv_mapping rpm,dbLMS.st_lms_user_priv_mapping upm where upm.user_id=11001 and upm.role_id=1 and rpm.status='ACTIVE' and upm.status='ACTIVE'and upm.role_id=rpm.role_id and upm.service_mapping_id=1) result where upm.user_id=11001 and upm.priv_id=pr.priv_id and pr.status='ACTIVE' and result.priv_id=pr.priv_id and pr.group_name not in ('Add Sub User','Edit Sub User Privileges','Role Head Registration','Miscellaneous','User Priviledge Report') and related_to='ACT_MGT' order by related_to,group_name;

SubUserHomePriviledgeBOUserMGMT=select distinct(pr.group_name) from dbLMS.st_lms_user_priv_mapping upm,dbLMS.st_lms_priviledge_rep as pr,(select distinct(upm.priv_id) from dbLMS.st_lms_role_priv_mapping rpm,dbLMS.st_lms_user_priv_mapping upm where upm.user_id=11001 and upm.role_id=1 and rpm.status='ACTIVE' and upm.status='ACTIVE'and upm.role_id=rpm.role_id and upm.service_mapping_id=1) result where upm.user_id=11001 and upm.priv_id=pr.priv_id and pr.status='ACTIVE' and result.priv_id=pr.priv_id and pr.group_name not in ('Add Sub User','Edit Sub User Privileges','Role Head Registration','Miscellaneous','User Priviledge Report') and related_to='BO_USER_MGT' order by related_to,group_name;

SubUserHomePriviledgeINVMGMT=select distinct(pr.group_name) from dbLMS.st_lms_user_priv_mapping upm,dbLMS.st_lms_priviledge_rep as pr,(select distinct(upm.priv_id) from dbLMS.st_lms_role_priv_mapping rpm,dbLMS.st_lms_user_priv_mapping upm where upm.user_id=11001 and upm.role_id=1 and rpm.status='ACTIVE' and upm.status='ACTIVE'and upm.role_id=rpm.role_id and upm.service_mapping_id=1) result where upm.user_id=11001 and upm.priv_id=pr.priv_id and pr.status='ACTIVE' and result.priv_id=pr.priv_id and pr.group_name not in ('Add Sub User','Edit Sub User Privileges','Role Head Registration','Miscellaneous','User Priviledge Report') and related_to='INV_MGT' order by related_to,group_name;

SubUserHomePriviledgeReports=select distinct(pr.group_name) from dbLMS.st_lms_user_priv_mapping upm,dbLMS.st_lms_priviledge_rep as pr,(select distinct(upm.priv_id) from dbLMS.st_lms_role_priv_mapping rpm,dbLMS.st_lms_user_priv_mapping upm where upm.user_id=11001 and upm.role_id=1 and rpm.status='ACTIVE' and upm.status='ACTIVE'and upm.role_id=rpm.role_id and upm.service_mapping_id=1) result where upm.user_id=11001 and upm.priv_id=pr.priv_id and pr.status='ACTIVE' and result.priv_id=pr.priv_id and pr.group_name not in ('Add Sub User','Edit Sub User Privileges','Role Head Registration','Miscellaneous','User Priviledge Report') and related_to='REPORTS' order by related_to,group_name;

SubUserHomePriviledgeRoleMGMT=select distinct(pr.group_name) from dbLMS.st_lms_user_priv_mapping upm,dbLMS.st_lms_priviledge_rep as pr,(select distinct(upm.priv_id) from dbLMS.st_lms_role_priv_mapping rpm,dbLMS.st_lms_user_priv_mapping upm where upm.user_id=11001 and upm.role_id=1 and rpm.status='ACTIVE' and upm.status='ACTIVE'and upm.role_id=rpm.role_id and upm.service_mapping_id=1) result where upm.user_id=11001 and upm.priv_id=pr.priv_id and pr.status='ACTIVE' and result.priv_id=pr.priv_id and pr.group_name not in ('Add Sub User','Edit Sub User Privileges','Role Head Registration','Miscellaneous','User Priviledge Report') and related_to='ROLE_MGT' order by related_to,group_name;

SubUserHomePriviledgeUserMGMT=select distinct(pr.group_name) from dbLMS.st_lms_user_priv_mapping upm,dbLMS.st_lms_priviledge_rep as pr,(select distinct(upm.priv_id) from dbLMS.st_lms_role_priv_mapping rpm,dbLMS.st_lms_user_priv_mapping upm where upm.user_id=11001 and upm.role_id=1 and rpm.status='ACTIVE' and upm.status='ACTIVE'and upm.role_id=rpm.role_id and upm.service_mapping_id=1) result where upm.user_id=11001 and upm.priv_id=pr.priv_id and pr.status='ACTIVE' and result.priv_id=pr.priv_id and pr.group_name not in ('Add Sub User','Edit Sub User Privileges','Role Head Registration','Miscellaneous','User Priviledge Report') and related_to='USER_MGT' order by related_to,group_name;

SubAgentRegistration1=

SubAgentRegistration2=

SubAgentRegistration3=

SubAgentRegistration4=

ApproveTrainingGame=select game_name from dbLMS.st_dg_game_master order by  display_order Asc;

ApproveTrainingPayment1=select a.name as agentname,b.mrp_sale as saleamount,b.training_exp_per as TrExp,b.training_exp_amt as TrExpAmt,b.time_slotted_mrp_sale as TimeSlottedMrpSale,b.extra_training_exp_per as ExTrExp,b.extra_training_exp_amt as ExTrExpAmt,FORMAT((b.training_exp_amt+b.extra_training_exp_amt),2) as TotalTrExpAmt,b.status as statuss,b.credit_note_number as CRNoteNo,b.updated_date as approvedate from dbLMS.st_lms_organization_master a inner join dbLMS.st_lms_agent_daily_training_exp b on a.organization_id=b.agent_org_id where b.game_id=2 and b.date='keyDate' and b.status='done' order by agentname ASC;

ApproveTrainingPayment2=select a.name as agentname,b.mrp_sale as saleamount,b.training_exp_per as TrExp,b.training_exp_amt as TrExpAmt,b.time_slotted_mrp_sale as TimeSlottedMrpSale,b.extra_training_exp_per as ExTrExp ,b.extra_training_exp_amt as ExTrExpAmt,(b.training_exp_amt+b.extra_training_exp_amt) as TotalTrExpAmt,b.status as statuss,b.credit_note_number as CRNoteNo,b.updated_date as approvedate from dbLMS.st_lms_organization_master a inner join dbLMS.st_lms_agent_daily_training_exp b on a.organization_id=b.agent_org_id where b.game_id=2 and b.date='keyDate' and b.status='pending'  order by agentname ASC;

ApproveTrainingPayment3=select a.name orgCode ,b.mrp_sale,b.training_exp_per,b.training_exp_amt,time_slotted_mrp_sale,extra_training_exp_per,extra_training_exp_amt,format(b.training_exp_amt,2),b.status,b.credit_note_number,b.updated_date from dbLMS.st_lms_organization_master a,dbLMS.st_lms_agent_weekly_training_exp b where b.agent_org_id=a.organization_id and b.date between date('keyDate') and DATE_ADD(date('keyDate'), INTERVAL 6 DAY) and game_id=2 and b.status in ('done','pending') order by orgCode ASC;

ApproveTrainingPayment4=select a.name orgCode ,b.mrp_sale,b.training_exp_per,b.training_exp_amt,time_slotted_mrp_sale,extra_training_exp_per,extra_training_exp_amt,format(b.training_exp_amt,2),b.status,b.credit_note_number,b.updated_date from dbLMS.st_lms_organization_master a,dbLMS.st_lms_agent_weekly_training_exp b where b.agent_org_id=a.organization_id and b.date between date('keyDate') and DATE_ADD(date('keyDate'), INTERVAL 6 DAY) and game_id=2 and b.status ='done' order by orgCode ASC;

ApproveTrainingPayment5=select a.name orgCode ,b.mrp_sale,b.training_exp_per,b.training_exp_amt,time_slotted_mrp_sale,extra_training_exp_per,extra_training_exp_amt,format(b.training_exp_amt,2),b.status,b.credit_note_number,b.updated_date from dbLMS.st_lms_organization_master a,dbLMS.st_lms_agent_weekly_training_exp b where b.agent_org_id=a.organization_id and b.date between date('keyDate') and DATE_ADD(date('keyDate'), INTERVAL 6 DAY) and game_id=2 and b.status='pending' order by orgCode ASC;

ApproveTrainingALLDailyCR=select b.credit_note_number as CRNoteNo from dbLMS.st_lms_organization_master a inner join dbLMS.st_lms_agent_daily_training_exp b on a.organization_id=b.agent_org_id where b.game_id=2 and b.date='keyDate' and b.status='done';

ApproveTrainingALLDailyDATE=select b.updated_date as approvedate from dbLMS.st_lms_organization_master a inner join dbLMS.st_lms_agent_daily_training_exp b on a.organization_id=b.agent_org_id where b.game_id=2 and b.date='keyDate' and b.status='done';

ApproveTrainingCRNOTE=select b.credit_note_number as CRNoteNo from dbLMS.st_lms_organization_master a inner join dbLMS.st_lms_agent_daily_training_exp b on a.organization_id=b.agent_org_id where b.game_id=2 and b.date='keyDate' and b.status='done' order by b.credit_note_number desc limit 1;

ApproveTrainingDATE=select b.updated_date as approvedate from dbLMS.st_lms_organization_master a inner join dbLMS.st_lms_agent_daily_training_exp b on a.organization_id=b.agent_org_id where b.game_id=2 and b.date='keyDate' and b.status='done' order by b.credit_note_number desc limit 1;

RemainingBal=Select ((Select available_credit from dbLMS.st_lms_organization_master where name = 'keyOrgName')-(Select claimable_bal from dbLMS.st_lms_organization_master where name = 'keyOrgName')) as AvailableBalance;

ReceiptId=SELECT generated_id FROM dbLMS.st_lms_bo_receipts ORDER BY receipt_id DESC LIMIT 1;

CashPayment1=Select CONCAT('keyOrgName Account is Credited By : ',(SELECT format(amount,2) FROM dbLMS.st_lms_bo_cash_transaction ORDER BY transaction_id DESC LIMIT 1),' NGN') as data;

OrganizationName=Select Name from dbLMS.st_lms_organization_master where Organization_type='Agent' and (Organization_status='Active' or organization_status='Inactive' or Organization_status='block')  order by name Asc;

CreditConfirmation1=Select concat('Party Account is Credited By : ',amount) from dbLMS.st_lms_bo_credit_note ORDER BY transaction_id DESC LIMIT 1;

DebitConfirmation1=Select concat('Party Account is Debited By : ',amount) from dbLMS.st_lms_bo_debit_note ORDER BY transaction_id DESC LIMIT 1;

ChequeNumber=Select Cheque_nbr from dbLMS.st_lms_bo_cheque_temp_receipt ORDER BY temp_receipt_id DESC LIMIT 1;

ChequeBank=Select drawee_bank from dbLMS.st_lms_bo_cheque_temp_receipt ORDER BY temp_receipt_id DESC LIMIT 1;

ChequeAmount=Select format(cheque_amt,2) from dbLMS.st_lms_bo_cheque_temp_receipt ORDER BY temp_receipt_id DESC LIMIT 1;

ValidChequeNumber=select Cheque_nbr from dbLMS.st_lms_bo_cheque_temp_receipt where cheque_status='Cleared' and cheque_nbr not in(select cheque_nbr from dbLMS.st_lms_bo_sale_chq where transaction_type='CHQ_BOUNCE') order by temp_receipt_id  Desc limit 1;

ChequeDetail1=select cheque_date from dbLMS.st_lms_bo_cheque_temp_receipt where cheque_status='Cleared' and cheque_nbr not in(select cheque_nbr from dbLMS.st_lms_bo_sale_chq where transaction_type='CHQ_BOUNCE') order by temp_receipt_id  Desc limit 1;

ChequeDetail2=select issuing_party_name from dbLMS.st_lms_bo_cheque_temp_receipt where cheque_status='Cleared' and cheque_nbr not in(select cheque_nbr from dbLMS.st_lms_bo_sale_chq where transaction_type='CHQ_BOUNCE') order by temp_receipt_id  Desc limit 1;

ChequeDetail3=select name from dbLMS.st_lms_bo_cheque_temp_receipt,dbLMS.st_lms_organization_master where cheque_status='Cleared' and (Organization_id = agent_org_id) and cheque_nbr not in(select cheque_nbr from dbLMS.st_lms_bo_sale_chq where transaction_type='CHQ_BOUNCE') order by temp_receipt_id  Desc limit 1 ;

ChequeDetail4=select drawee_bank from dbLMS.st_lms_bo_cheque_temp_receipt where cheque_status='Cleared' and cheque_nbr not in(select cheque_nbr from dbLMS.st_lms_bo_sale_chq where transaction_type='CHQ_BOUNCE') order by temp_receipt_id  Desc limit 1;

ChequeDetail5=select format(cheque_amt,2) from dbLMS.st_lms_bo_cheque_temp_receipt where cheque_status='Cleared' and cheque_nbr not in(select cheque_nbr from dbLMS.st_lms_bo_sale_chq where transaction_type='CHQ_BOUNCE') order by temp_receipt_id  Desc limit 1;

PartyAccountDebit=Select format(((SELECT cheque_amt FROM dbLMS.st_lms_bo_cheque_temp_receipt ORDER BY temp_receipt_id DESC LIMIT 1)+(Select amount From  dbLMS.st_lms_bo_transaction_master a inner join  dbLMS.st_lms_bo_debit_note b on a.transaction_id=b.transaction_id order by a.transaction_id DESC limit 1)),2) as Amount;

VerifyChequeClearance1=Select name  from dbLMS.st_lms_bo_cheque_temp_receipt,dbLMS.st_lms_organization_master where Organization_id = agent_org_id and agent_org_Id=(Select organization_id from dbLMS.st_lms_organization_master where name='keyOrgName') and cheque_status='Pending' order by temp_receipt_id Asc limit 1;

VerifyChequeClearance2=select cheque_nbr from dbLMS.st_lms_bo_cheque_temp_receipt where cheque_status='Pending' and agent_org_Id=(Select organization_id from dbLMS.st_lms_organization_master where name='keyOrgName') and cheque_nbr not in(select cheque_nbr from dbLMS.st_lms_bo_sale_chq  where transaction_type='CHQ_BOUNCE') order by temp_receipt_id ASC limit 1;

VerifyChequeClearance3=select format(cheque_amt,2) from dbLMS.st_lms_bo_cheque_temp_receipt where cheque_status='Pending' and agent_org_Id=(Select organization_id from dbLMS.st_lms_organization_master where name='keyOrgName') and cheque_nbr not in(select cheque_nbr from dbLMS.st_lms_bo_sale_chq where transaction_type='CHQ_BOUNCE') order by temp_receipt_id  ASC limit 1;

VerifyChequeClearance4=select date_format(cheque_date,'%c/%e/%y') from dbLMS.st_lms_bo_cheque_temp_receipt where cheque_status='Pending' and agent_org_Id=(Select organization_id from dbLMS.st_lms_organization_master where name='keyOrgName') and cheque_nbr not in(select cheque_nbr from dbLMS.st_lms_bo_sale_chq  where transaction_type='CHQ_BOUNCE') order by temp_receipt_id ASC limit 1;

VerifyChequeClearance5=select drawee_bank from dbLMS.st_lms_bo_cheque_temp_receipt where cheque_status='Pending' and agent_org_Id=(Select organization_id from dbLMS.st_lms_organization_master where name='keyOrgName') and cheque_nbr not in(select cheque_nbr from dbLMS.st_lms_bo_sale_chq  where transaction_type='CHQ_BOUNCE') order by temp_receipt_id ASC limit 1;

VerifyChequeClearance6=select issuing_party_name from dbLMS.st_lms_bo_cheque_temp_receipt where cheque_status='Pending' and agent_org_Id=(Select organization_id from dbLMS.st_lms_organization_master where name='keyOrgName') and cheque_nbr not in(select cheque_nbr from dbLMS.st_lms_bo_sale_chq  where transaction_type='CHQ_BOUNCE') order by temp_receipt_id ASC limit 1;

VerifyChequeClearanceConfirmation1=Select Concat('Show receipt receipt Id ',(select receipt_id from dbLMS.st_lms_bo_receipts where receipt_type='RECEIPT' order by receipt_id desc limit 1));

UserSearch=select  a.user_id,a.user_name ,c.name orgCode ,d.name parentorgCode,a.status,b.role_name, DATE_FORMAT(a.registration_date , '%c/%e/%y') from dbLMS.st_lms_user_master a,dbLMS.st_lms_role_master b,dbLMS.st_lms_organization_master c,dbLMS.st_lms_organization_master d where b.tier_id in (select tier_id from dbLMS.st_lms_tier_master where (tier_code = 'AGENT' or tier_code = 'RETAILER')) and a.role_id=b.role_id and c.organization_id=a.organization_id and d.organization_id=c.parent_id and 1=1 order by user_name;

VerifyChequeClearanceConfirmation2=Select Concat('Show Debit Note Debit Note Id ',(select receipt_id from dbLMS.st_lms_bo_receipts where receipt_type='DR_NOTE' order by receipt_id desc limit 1));

UpdateTraining1=select game_name  from st_dg_game_master order by display_order ASC;

UpdateTrainingExpenseName=select name from dbLMS.st_lms_organization_master where organization_type='agent' and organization_status!='TERMINATE' order by name ;

UpdateTrainingExpenseDefault=select round(training_exp_default,1) from dbLMS.st_lms_agent_default_daily_training_exp where game_id = 1;

UpdateTrainingExpenseVariance=select ifnull(aa.training_exp_var,0) from dbLMS.st_lms_organization_master c left join (select * from dbLMS.st_lms_organization_master a inner join dbLMS.st_lms_agent_daily_trng_exp_var_mapping b where a.organization_id = b.agent_org_id and a.organization_type='agent' and a.organization_status!='TERMINATE' and b.game_id = 14) aa on aa.agent_org_id = c.organization_id where  c.organization_type='agent' and c.organization_status!='TERMINATE' order by c.name ;

UpdateTrainingExpenseTotal=select ifnull(aa.training_exp_var,0)+5 as var from dbLMS.st_lms_organization_master c left join (select * from dbLMS.st_lms_organization_master a inner join dbLMS.st_lms_agent_daily_trng_exp_var_mapping b where a.organization_id = b.agent_org_id and a.organization_type='agent' and a.organization_status!='TERMINATE' and b.game_id = 14) aa on aa.agent_org_id = c.organization_id where  c.organization_type='agent' and c.organization_status!='TERMINATE'  order by c.name ;

UpdateTrainingExpensePromotional=select ifnull(aa.extra_training_exp_var,0) from dbLMS.st_lms_organization_master c left join (select * from dbLMS.st_lms_organization_master a inner join dbLMS.st_lms_agent_daily_trng_exp_var_mapping b where a.organization_id = b.agent_org_id and a.organization_type='agent' and a.organization_status!='TERMINATE' and b.game_id = 14) aa on aa.agent_org_id = c.organization_id where  c.organization_type='agent' and c.organization_status!='TERMINATE'  order by c.name ;

UpdateTrainingExpenseTotalPromo=select ifnull(aa.extra_training_exp_var,0)+0 from dbLMS.st_lms_organization_master c left join (select * from dbLMS.st_lms_organization_master a inner join dbLMS.st_lms_agent_daily_trng_exp_var_mapping b where a.organization_id = b.agent_org_id and a.organization_type='agent' and a.organization_status!='TERMINATE' and b.game_id = 14) aa on aa.agent_org_id = c.organization_id where  c.organization_type='agent' and c.organization_status!='TERMINATE'  order by c.name ;

UpdateTrainingExpenseVar=select training_exp_var from dbLMS.st_lms_agent_daily_trng_exp_var_mapping a inner join dbLMS.st_lms_organization_master b on a.agent_org_id = b.organization_id where organization_type='agent' and organization_status!='TERMINATE'and b.name='Keynewret' and a.game_id = 14;

UpdateTrainingExpenseExtraVar=select extra_training_exp_var from dbLMS.st_lms_agent_daily_trng_exp_var_mapping a inner join dbLMS.st_lms_organization_master b on a.agent_org_id = b.organization_id where organization_type='agent' and organization_status!='TERMINATE'and b.name='Keynewret' and a.game_id = 14;

UpdateTrainingExpenseName1=select name from dbLMS.st_lms_organization_master where organization_type='agent' and organization_status!='TERMINATE' order by name ;

UpdateTrainingExpenseDefault1=select round(training_exp_default,1) from dbLMS.st_lms_agent_default_weekly_training_exp where game_id = 1;

UpdateTrainingExpenseVariance1=select ifnull(aa.training_exp_var,0) from dbLMS.st_lms_organization_master c left join (select * from dbLMS.st_lms_organization_master a inner join dbLMS.st_lms_agent_weekly_trng_exp_var_mapping b where a.organization_id = b.agent_org_id and a.organization_type='agent' and a.organization_status!='TERMINATE' and b.game_id = 14) aa on aa.agent_org_id = c.organization_id where  c.organization_type='agent' and c.organization_status!='TERMINATE' order by c.name ;

UpdateTrainingExpenseTotal1=select ifnull(aa.training_exp_var,0)+5 as var from dbLMS.st_lms_organization_master c left join (select * from dbLMS.st_lms_organization_master a inner join dbLMS.st_lms_agent_weekly_trng_exp_var_mapping b where a.organization_id = b.agent_org_id and a.organization_type='agent' and a.organization_status!='TERMINATE' and b.game_id = 14) aa on aa.agent_org_id = c.organization_id where  c.organization_type='agent' and c.organization_status!='TERMINATE'  order by c.name ;

UpdateTrainingExpensePromotional1=select ifnull(aa.extra_training_exp_var,0) from dbLMS.st_lms_organization_master c left join (select * from dbLMS.st_lms_organization_master a inner join dbLMS.st_lms_agent_weekly_trng_exp_var_mapping b where a.organization_id = b.agent_org_id and a.organization_type='agent' and a.organization_status!='TERMINATE' and b.game_id = 14) aa on aa.agent_org_id = c.organization_id where  c.organization_type='agent' and c.organization_status!='TERMINATE'  order by c.name ;

UpdateTrainingExpenseTotalPromo1=select ifnull(aa.extra_training_exp_var,0)+0 from dbLMS.st_lms_organization_master c left join (select * from dbLMS.st_lms_organization_master a inner join dbLMS.st_lms_agent_weekly_trng_exp_var_mapping b where a.organization_id = b.agent_org_id and a.organization_type='agent' and a.organization_status!='TERMINATE' and b.game_id = 14) aa on aa.agent_org_id = c.organization_id where  c.organization_type='agent' and c.organization_status!='TERMINATE'  order by c.name ;

UpdateTrainingExpenseVar1=select training_exp_var from dbLMS.st_lms_agent_weekly_trng_exp_var_mapping a inner join dbLMS.st_lms_organization_master b on a.agent_org_id = b.organization_id where organization_type='agent' and organization_status!='TERMINATE'and b.name='Keynewret' and a.game_id = 14;

UpdateTrainingExpenseExtraVar1=select extra_training_exp_var from dbLMS.st_lms_agent_weekly_trng_exp_var_mapping a inner join dbLMS.st_lms_organization_master b on a.agent_org_id = b.organization_id where organization_type='agent' and organization_status!='TERMINATE'and b.name='Keynewret' and a.game_id = 14;

UserSearchAgentActive=select  a.user_id,a.user_name ,c.name orgCode ,d.name parentorgCode,a.status,b.role_name, DATE_FORMAT(a.registration_date , '%c/%e/%y') from dbLMS.st_lms_user_master a,dbLMS.st_lms_role_master b,dbLMS.st_lms_organization_master c,dbLMS.st_lms_organization_master d where b.tier_id in (select tier_id from dbLMS.st_lms_tier_master where tier_code = 'AGENT') and a.role_id=b.role_id and a.status='Active' and c.organization_id=a.organization_id and d.organization_id=c.parent_id and 1=1 order by user_name;

SearchUserInactiveStatus=select b.status from dbLMS.st_lms_user_contact_details a inner join dbLMS.st_lms_user_master b on a.user_id=b.user_id where a.user_id='keyUserId' and status='INACTIVE';

SearchUserPassword=select b.password from dbLMS.st_lms_user_contact_details a inner join dbLMS.st_lms_user_master b on a.user_id=b.user_id where a.user_id='keyUserId';

SearchUserLoginAttempt=Select b.login_attempts from dbLMS.st_lms_user_contact_details a inner join dbLMS.st_lms_user_master b on a.user_id=b.user_id where a.user_id='keyUserId';

SearchUserInactiveStatus1=select b.status from dbLMS.st_lms_user_contact_details a inner join dbLMS.st_lms_user_master b on a.user_id=b.user_id where a.user_id='keyUserId' and status='INACTIVE';

TrackTerminal=select  name orgCode ,date_format(date, '%d-%m-%Y %h:%i:%s') from dbLMS.st_lms_inv_detail inv , dbLMS.st_lms_organization_master,dbLMS.st_lms_inv_status sts where inv.serial_no='keySerialNo' and inv.inv_model_id = 1 and sts.inv_model_id = 1 and sts.serial_no=inv.serial_no and organization_id = inv.current_owner_id and sts.current_owner_type <> 'REMOVED';

AssignInv1=Select Current_owner_type from st_lms_inv_status where serial_no = '<Inv>';

TrackTickat1=select if(a.draw_status='Claim Hold' and a.verification_date< now() and a.claim_start_date > now(),'Claim_Pending','NULL') as 's'  from  ge_draw_master_1 a join ge_tickets_1 b on a.draw_id =b.draw_id_list where b.ticket_number=10903113061539002  group by b.ticket_number;

TrackTickat2=Select if(a.draw_status='Claim Hold' and a.claim_start_date<now(),'Result Awaited','NULL') as 'Draw Status' from ge_draw_master_10 a join ge_draw_ticket_10_10 b on a.draw_id=b.draw_id where b.ticket_number=11053215700025488 group by b.ticket_number;

TrackTickatReprint=select if(rpc_total<>0,concat('Ticket has Been Reprinted ',rpc_total,'Time(s).'),'Null') as RS from dbDGE.ge_tickets_1 where  ticket_number=(select ticket_number from(select substring('keyTicketNo',1,17) as 'ticket_number')aa) group by  ticket_number;

TrackTickatDrawActive=select if(b.draw_status='ACTIVE' ,'Verification Pending','Null') as 'Draw Status' from dbDGE.ge_tickets_1 a join dbDGE.ge_draw_master_1 b on a.draw_id_list=b.draw_id where a.ticket_number=(Select SUBSTRING('keyTicketNo' , 1, CHAR_LENGTH('keyTicketNo')-1)) group by a.ticket_number;

TrackTickatDrawActive1=select if (status='unclaimed','N.A.','NULL') as 'Ticket Status' from dbDGE.ge_draw_ticket_1_keyDrawId where ticket_number=(Select SUBSTRING('keyTicketNo' , 1, CHAR_LENGTH('keyTicketNo')-1));

TrackTickatDrawFreeze1=select if(b.draw_status='Freeze' ,'Verification Pending','Null') as 'Draw Status' from dbDGE.ge_tickets_1 a join ge_draw_master_1 b on a.draw_id_list=b.draw_id where a.ticket_number=(Select SUBSTRING('keyTicketNo' , 1, CHAR_LENGTH('keyTicketNo')-1)) group by a.ticket_number;

TrackTickatDrawFreeze2=select if (status='unclaimed','N.A.','NULL') as 'Ticket Status' from dbDGE.ge_draw_ticket_1_keyDrawid where ticket_number=(Select SUBSTRING('keyTicketNo' , 1, CHAR_LENGTH('keyTicketNo')-1)) group by ticket_number;

TrackTickatDrawFreezeUpdate=Update dbDGE.ge_draw_master_1 Set verification_date=DATE_ADD(date(verification_date), INTERVAL 1 DAY) where draw_id=(Select draw_id from (Select a.draw_id from dbDGE.ge_draw_master_1 a,dbDGE.ge_tickets_1 b where a.draw_id=b.draw_id_list and a.draw_status='Freeze' and b.rpc_total=0  order by draw_id DESC limit 1) as t) and verification_date=if((Select verification_date from (Select a.verification_date from dbDGE.ge_draw_master_1 a,dbDGE.ge_tickets_1 b where a.draw_id=b.draw_id_list and a.draw_status='Freeze' and b.rpc_total=0 order by a.draw_id DESC limit 1) as t) < now(),verification_date,DATE_ADD(date(verification_date), INTERVAL 1 DAY))  ORDER BY draw_id DESC LIMIT 1 ;

TrackTickatDrawClaimUpdate=Update dbDGE.ge_draw_master_1 Set claim_start_date=DATE_ADD(date(claim_start_date), INTERVAL 1 DAY) where draw_id=(Select draw_id from (Select a.draw_id from dbDGE.ge_draw_master_1 a,dbDGE.ge_tickets_1 b where a.draw_id=b.draw_id_list and a.draw_status='Freeze' and b.rpc_total=0 and date(verification_date)<date(now()) order by draw_id DESC limit 1) as t) and claim_start_date=if((Select claim_start_date from (Select a.claim_start_date from dbDGE.ge_draw_master_1 a,dbDGE.ge_tickets_1 b where a.draw_id=b.draw_id_list and a.draw_status='Freeze' and b.rpc_total=0 and date(verification_date)<date(now()) order by a.draw_id DESC limit 1) as t) < now(),claim_start_date,DATE_ADD(date(claim_start_date), INTERVAL 1 DAY))  ORDER BY draw_id DESC LIMIT 1 ;

TrackTickatDrawClaim1=select if(b.draw_status='Freeze' ,'CLAIM PENDING','Null') as 'Draw Status' from dbDGE.ge_tickets_1 a join dbDGE.ge_draw_master_1 b on a.draw_id_list=b.draw_id where a.ticket_number=(Select SUBSTRING('keyTicketNo' , 1, CHAR_LENGTH('keyTicketNo')-1)) group by a.ticket_number;

TrackTickatDrawClaim2=select if (status='unclaimed','N.A.','NULL') as 'Ticket Status' from dbDGE.ge_draw_ticket_1_keyDrawid where ticket_number=(Select SUBSTRING('keyTicketNo' , 1, CHAR_LENGTH('keyTicketNo')-1)) group by ticket_number;

TrackTickatClaimComeUpdate=Update dbDGE.ge_draw_master_1 Set claim_start_date=DATE_ADD(date(claim_start_date), INTERVAL 1 DAY) where draw_id=(Select draw_id from (Select a.draw_id from dbDGE.ge_draw_master_1 a,dbDGE.ge_tickets_1 b where a.draw_id=b.draw_id_list and a.draw_status='Freeze' and b.rpc_total=0 and date(Claim_start_date)<date(now()) order by draw_id DESC limit 1) as t) and claim_start_date=if((Select claim_start_date from (Select a.claim_start_date from dbDGE.ge_draw_master_1 a,dbDGE.ge_tickets_1 b where a.draw_id=b.draw_id_list and a.draw_status='Freeze' and b.rpc_total=0 and date(Claim_start_date)<date(now()) order by a.draw_id DESC limit 1) as t) < now(),claim_start_date,DATE_SUB(date(claim_start_date), INTERVAL 1 DAY))  ORDER BY draw_id DESC LIMIT 1 ;

TrackTickatClaimCome1=select if(draw_status='FREEZE'  and  claim_end_date>=now(),'Result Awaited','null') as 'Draw Status' from dbDGE.ge_tickets_1 a join dbDGE.ge_draw_master_1 b on a.draw_id_list=b.draw_id where a.ticket_number=(Select SUBSTRING('keyTicketNo' , 1, CHAR_LENGTH('keyTicketNo')-1)) group by a.ticket_number;

TrackTickatClaimCome2=select if (status='unclaimed','N.A.','NULL') as 'Ticket Status' from dbDGE.ge_draw_ticket_1_keyDrawId where ticket_number=(Select SUBSTRING('keyTicketNo' , 1, CHAR_LENGTH('keyTicketNo')-1)) group by ticket_number;

TrackTickatClaimEndUpdate=Update dbDGE.ge_draw_master_1 Set claim_end_date=DATE_ADD(date(claim_end_date), INTERVAL 1 DAY) where draw_id=(Select draw_id from (Select a.draw_id from dbDGE.ge_draw_master_1 a,dbDGE.ge_tickets_1 b where a.draw_id=b.draw_id_list and a.draw_status='Freeze' and b.rpc_total=0 and date(Claim_end_date)<date(now()) order by draw_id DESC limit 1) as t) and claim_end_date=if((Select claim_end_date from (Select a.claim_end_date from dbDGE.ge_draw_master_1 a,dbDGE.ge_tickets_1 b where a.draw_id=b.draw_id_list and a.draw_status='Freeze' and b.rpc_total=0 and date(Claim_end_date)<date(now()) order by a.draw_id DESC limit 1) as t) < now(),claim_end_date,DATE_SUB(date(claim_end_date), INTERVAL 1 DAY))  ORDER BY draw_id DESC LIMIT 1 ;

TrackTickatClaimEnd1=select if(draw_status='FREEZE'  and  claim_end_date<now(),'Draw_Expired','null') as 'Draw Status' from dbDGE.ge_tickets_1 a join dbDGE.ge_draw_master_1 b on a.draw_id_list=b.draw_id where a.ticket_number=(Select SUBSTRING('keyTicketNo' , 1, CHAR_LENGTH('keyTicketNo')-1)) group by a.ticket_number;

TrackTickatClaimEnd2=select if (status='unclaimed','N.A.','NULL') as 'Ticket Status' from dbDGE.ge_draw_ticket_1_keyDrawId where ticket_number=(Select SUBSTRING('keyTicketNo' , 1, CHAR_LENGTH('keyTicketNo')-1)) group by ticket_number;

MultiInvUpload=(Select serial_no from st_lms_inv_detail where serial_no in ('serialInv')) union (Select serial_no from st_lms_inv_status where serial_no in ('serialInv'));

AssignInv_TC5_1=select inv_name from dbLMS.st_lms_inv_master  where inv_type='NON_CONS';

AssignInv_TC5_2=select brand_name from dbLMS.st_lms_inv_brand_master where inv_id = 1;

AssignInv_TC5_3=Select model_name from dbLMS.st_lms_inv_model_master where brand_id=1;

Verify_InvAddMessage=Select concat((select model_name from dbLMS.st_lms_inv_model_master order by model_id DESc limit 1),'; Added Into Database')

Verify_ConsInvAddMessage=Select concat((select inv_name from dbLMS.st_lms_inv_master order by inv_id DESc limit 1),'; Added Into Database'); 

ReAssign@Agent_TC5=select serial_no from st_lms_inv_status  where current_owner_id in (select organization_id from st_lms_user_master  where user_name='mmagt')and inv_model_id=1;

Return@Agent_TC5=select serial_no from st_lms_inv_status  where current_owner_id in (select organization_id from st_lms_user_master  where user_name='eftret') and inv_model_id=1;(select organization_id from st_lms_user_master  where user_name='mmagt') and inv_model_id=1;

VerifyIsNewInv=select is_new  from dbLMS.st_lms_inv_status  where serial_no='SerialNumber';

VerifyIsNewInv2=select is_new  from dbLMS.st_lms_inv_detail  where serial_no='SerialNumber';

InvOrgID=Selectorganization_idfromdbLMS.st_lms_organization_masterwhereorganization_id=(Selectcurrent_owner_idfromdbLMS.st_lms_inv_statuswhereserial_no='serialNoKey');

SearchCons_TC9=select cumm_qty_count from st_lms_cons_inv_status where party_org_id in (select organization_id  from st_lms_organization_master  where name='MMAGT' union all select organization_id  from st_lms_organization_master  where parent_id  in ( select organization_id  from st_lms_organization_master  where name='MMAGT')) group by inv_model_id;

BOmaster_approval_at_BO_TC_2=Select request_id RequestID from st_dg_approval_req_master Where ticket_nbr=999231188714340290;

resultSubmissionDrawId=select draw_id from dbDGE.ge_draw_master_1  where (date(draw_datetime) BETWEEN (select DATE_FORMAT((select  STR_TO_DATE('keyDate','%d,%m,%Y')),'%Y-%m-%d')) AND date_format(now(),'%Y-%m-%d')) and draw_status ='FREEZE' order by draw_id;

resultSubmissionUserAssign=select CONCAT_WS('-',first_name, last_name) as username from dbLMS.st_lms_user_contact_details where user_id in (select user_id from dbLMS.st_lms_user_master where parent_user_id = 11001 and organization_type = 'BO')

resultSubmissionUserId=Select user1_id from dbDGE.st_dg_result_sub_master where user1_id=(Select user_id from dbLMS.st_lms_user_contact_details where first_name =(select SUBSTRING_INDEX('userNameKey','-',1)));

resultSubmissionUserId1=Select user1_id from dbDGE.st_dg_result_sub_master where user1_id=(Select user_id from dbLMS.st_lms_user_contact_details where first_name =(select SUBSTRING_INDEX('userNameKey1','-',1)));

resultSubmissionUserId2=Select user2_id from dbDGE.st_dg_result_sub_master where user2_id=(Select user_id from dbLMS.st_lms_user_contact_details where first_name =(select SUBSTRING_INDEX('userNameKey2','-',1)));

pendingPayment=Select request_id from st_dg_approval_req_master Where req_status='PND_PAY'  limit 1;

dashboardPAquery=select (available_credit-claimable_bal) from dbLMS.st_lms_organization_master where  organization_id in(select organization_id from dbLMS.st_lms_user_master  where parent_user_id=(select user_id from dbLMS.st_lms_user_master  where user_name = 'orgAgentName2'));

dashboardPAquery2=select sum(available_credit) from dbLMS.st_lms_organization_master where  organization_id in(select organization_id from dbLMS.st_lms_user_master  where parent_user_id=(select user_id from dbLMS.st_lms_user_master  where user_name = 'orgAgentName3') and organization_type='RETAILER');

Verify_Balance_limit=select available_credit-(select sum(available_credit) from dbLMS.st_lms_organization_master where organization_id in (select organization_id from dbLMS.st_lms_user_master  where parent_user_id=(select user_id from dbLMS.st_lms_user_master  where user_name = 'orgAgentName4'))) balance_limit from dbLMS.st_lms_organization_master where organization_id=(Select organization_id from dbLMS.st_lms_organization_master where name='orgAgentName4');
Verify_Balance_limit_New=select (available_credit-sub)Balance_Limit from(select available_credit,(select ifnull(sum(if((available_credit-claimable_bal)>0,(available_credit-claimable_bal),0)),0) as distributed from st_lms_organization_master where organization_type = 'RETAILER' and parent_id =(select organization_id from st_lms_organization_master where name= 'orgAgentName4') group by parent_id)sub  from st_lms_organization_master where organization_id=(select organization_id from st_lms_organization_master where name= 'orgAgentName4'))abc

Verify_limit_message=select format(available_credit-(select sum(available_credit) from dbLMS.st_lms_organization_master where organization_id in (select organization_id from dbLMS.st_lms_user_master  where parent_user_id in (select user_id from dbLMS.st_lms_user_master where user_name='orgAgentName4'))),2) balance_limit from dbLMS.st_lms_organization_master where organization_id in (select organization_id from dbLMS.st_lms_user_master where user_name='orgAgentName4');

Verify_Total_limit=select (available_credit-claimable_bal) from dbLMS.st_lms_organization_master  where name='orgAgentName4';

Verify_Distributed_limit=select sum(available_credit-claimable_bal) from dbLMS.st_lms_organization_master where organization_id in(select organization_id from dbLMS.st_lms_user_master where parent_user_id in(select user_id from dbLMS.st_lms_user_master where organization_id in (select organization_id from dbLMS.st_lms_organization_master  where name='orgAgentName4'))) order by name ;
Verify_Distributed_limit_New=select sub as distribute from(select available_credit,(select ifnull(sum(if((available_credit-claimable_bal)>0,(available_credit-claimable_bal),0)),0) as distributed from st_lms_organization_master where organization_type = 'RETAILER' and parent_id =(select organization_id from st_lms_organization_master where name= 'orgAgentName4') group by parent_id)sub  from st_lms_organization_master where organization_id=(select organization_id from st_lms_organization_master where name= 'orgAgentName4'))abc

Retailer_Credit_limit=select (available_credit-claimable_bal) from dbLMS.st_lms_organization_master where organization_id in(select organization_id from dbLMS.st_lms_user_master where parent_user_id in(select user_id from dbLMS.st_lms_user_master where organization_id in (select organization_id from dbLMS.st_lms_organization_master  where name='orgAgentName4'))) order by name;
Retailer_Credit_limit_New=select (a.available_credit-a.claimable_bal) as balance from st_lms_organization_master a inner join st_lms_ret_offline_master b on a.organization_id=b.organization_id where a.parent_id=(select organization_id from st_lms_organization_master where name='orgAgentName4') AND organization_status<>'TERMINATE' order by a.name ASC

Last_Login_Device=select concat(r.device_type ,"-",r.serial_number)  from dbLMS.st_lms_ret_offline_master  r join dbLMS.st_lms_user_master u  on r.user_id=u.user_id where u.parent_user_id in(select user_id from dbLMS.st_lms_user_master where organization_id in (select o.organization_id from dbLMS.st_lms_organization_master o where name='orgAgentName5'))order by user_name;

Assign_TC_7=select concat(first_name,'-', last_name) from st_lms_user_contact_details where user_id in(select user_id from st_lms_user_master where status = 'active' and organization_type = 'BO' );

LMSPANotTerminate=Select name from dbLMS.st_lms_organization_master where parent_id=(Select organization_id from dbLMS.st_lms_organization_master where name='orgAgentName4') and organization_status!='terminate' order by name asc;

LMSPAgentRetailer=Select name,organization_status from dbLMS.st_lms_organization_master where parent_id=(Select organization_id from dbLMS.st_lms_organization_master where name='orgAgentName4') and organization_status!='terminate' order by name asc;

SearchAgentWithXCLUpdatedBAL=Select format(updated_value,2) from dbLMS.st_lms_cl_xcl_update_history where organization_id=(Select organization_id from dbLMS.st_lms_organization_master where name = 'keyOrgName') order by auto_id desc limit 1;

SearchAgentWithXCLBALBeforeUpdate=Select format(total_bal_before_update,2) from dbLMS.st_lms_cl_xcl_update_history where organization_id=(Select organization_id from dbLMS.st_lms_organization_master where name = 'keyOrgName') order by auto_id desc limit 1;

SearchAgentWithXCLBALBeforeUpdate1=Select format(total_bal_before_update,2) from dbLMS.st_lms_cl_xcl_update_history where organization_id=(Select organization_id from dbLMS.st_lms_organization_master where name = 'keyOrgName') order by auto_id desc limit 1;

SearchAgentWithXCLUpdatedBAL1=Select format(updated_value,2) from dbLMS.st_lms_cl_xcl_update_history where organization_id=(Select organization_id from dbLMS.st_lms_organization_master where name = 'keyOrgName') order by auto_id desc limit 1;

SearchAgentWithXCLUpdatedBAL2=Select format(updated_value,2) from dbLMS.st_lms_cl_xcl_update_history where organization_id=(Select organization_id from dbLMS.st_lms_organization_master where name = 'keyOrgName') order by auto_id desc limit 1;

EditPrivDrawManagementActive=select a.group_name,b.status from st_dg_priviledge_rep  a inner join st_lms_user_priv_mapping b on a.priv_id=b.priv_id where a.related_to='DRAW_MGT' and b.status='ACTIVE' and a.priv_owner='agent' and b.user_id=(Select a.user_id from st_lms_user_master a,st_lms_organization_master b where a.organization_id=b.organization_id and b.name='keyPA') and b.service_mapping_id=11 and is_start='Y';

EdivPrivPWTActive=select a.group_name,b.status from st_dg_priviledge_rep  a inner join st_lms_user_priv_mapping b on a.priv_id=b.priv_id where a.related_to='PWT' and b.status='ACTIVE' and a.priv_owner='agent' and b.user_id=(Select a.user_id from st_lms_user_master a,st_lms_organization_master b where a.organization_id=b.organization_id and b.name='keyPA') and b.service_mapping_id=11 and is_start='Y';

EditPrivDrawReportsActiveActive=select a.group_name,b.status from st_dg_priviledge_rep  a inner join st_lms_user_priv_mapping b on a.priv_id=b.priv_id where a.related_to='REPORTS' and b.status='ACTIVE' and a.priv_owner='agent' and b.user_id=(Select a.user_id from st_lms_user_master a,st_lms_organization_master b where a.organization_id=b.organization_id and b.name='keyPA') and b.service_mapping_id=11 and is_start='Y';

EditPrivAccountActive=select a.group_name,b.status from st_lms_priviledge_rep a inner join st_lms_user_priv_mapping b on a.priv_id=b.priv_id where a.related_to='ACT_MGT' and b.status='ACTIVE' and a.priv_owner='agent' and b.user_id=(Select a.user_id from st_lms_user_master a,st_lms_organization_master b where a.organization_id=b.organization_id and b.name='keyPA') and b.service_mapping_id=2 and is_start='Y';

EditPrivPAUserActive=select a.group_name,b.status from st_lms_priviledge_rep a inner join st_lms_user_priv_mapping b on a.priv_id=b.priv_id where a.related_to='AGENT_USER_MGT' and b.status='ACTIVE' and a.priv_owner='agent' and b.user_id=(Select a.user_id from st_lms_user_master a,st_lms_organization_master b where a.organization_id=b.organization_id and b.name='keyPA') and b.service_mapping_id=2 and is_start='Y';

EditPrivInventoryActive=select a.group_name,b.status from st_lms_priviledge_rep a inner join st_lms_user_priv_mapping b on a.priv_id=b.priv_id where a.related_to='INV_MGT' and a.status='ACTIVE' and a.priv_owner='agent' and b.user_id=(Select a.user_id from st_lms_user_master a,st_lms_organization_master b where a.organization_id=b.organization_id and b.name='keyPA') and b.service_mapping_id=2 and is_start='Y';

EditPrivHomeReportsActive=select a.group_name,b.status from st_lms_priviledge_rep a inner join st_lms_user_priv_mapping b on a.priv_id=b.priv_id where a.related_to='REPORTS' and b.status='ACTIVE' and a.priv_owner='agent' and b.user_id=(Select a.user_id from st_lms_user_master a,st_lms_organization_master b where a.organization_id=b.organization_id and b.name='keyPA') and b.service_mapping_id=2 and is_start='Y';

EditPrivUserManagementActive=select a.group_name,b.status from st_lms_priviledge_rep a inner join st_lms_user_priv_mapping b on a.priv_id=b.priv_id where a.related_to='USER_MGT' and b.status='ACTIVE' and a.priv_owner='agent' and b.user_id=(Select a.user_id from st_lms_user_master a,st_lms_organization_master b where a.organization_id=b.organization_id and b.name='keyPA') and b.service_mapping_id=2 and is_start='Y';

EditPrivDrawManagementInActive=select a.group_name,b.status from st_dg_priviledge_rep  a inner join st_lms_user_priv_mapping b on a.priv_id=b.priv_id where a.related_to='DRAW_MGT' and a.status='ACTIVE' and b.status='INACTIVE' and a.priv_owner='agent' and b.user_id=(Select a.user_id from st_lms_user_master a,st_lms_organization_master b where a.organization_id=b.organization_id and b.name='keyPA') and b.service_mapping_id=11 and is_start='Y';

EdivPrivPWTInActive=select a.group_name,b.status from st_dg_priviledge_rep  a inner join st_lms_user_priv_mapping b on a.priv_id=b.priv_id where a.related_to='PWT' and a.status='ACTIVE' and b.status='INACTIVE'  and a.priv_owner='agent' and b.user_id=(Select a.user_id from st_lms_user_master a,st_lms_organization_master b where a.organization_id=b.organization_id and b.name='keyPA') and b.service_mapping_id=11 and is_start='Y';

EditPrivDrawReportsInActive=select a.group_name,b.status from st_dg_priviledge_rep  a inner join st_lms_user_priv_mapping b on a.priv_id=b.priv_id where a.related_to='REPORTS' and a.status='ACTIVE' and b.status='INACTIVE'  and a.priv_owner='agent' and b.user_id=(Select a.user_id from st_lms_user_master a,st_lms_organization_master b where a.organization_id=b.organization_id and b.name='keyPA') and b.service_mapping_id=11 and is_start='Y';

EditPrivAccountInActive=select a.group_name,b.status from st_lms_priviledge_rep a inner join st_lms_user_priv_mapping b on a.priv_id=b.priv_id where a.related_to='ACT_MGT' and a.status='ACTIVE' and b.status='INACTIVE'  and a.priv_owner='agent' and b.user_id=(Select a.user_id from st_lms_user_master a,st_lms_organization_master b where a.organization_id=b.organization_id and b.name='keyPA') and b.service_mapping_id=2 and is_start='Y';

EditPrivPAUserInActive=select a.group_name,b.status from st_lms_priviledge_rep a inner join st_lms_user_priv_mapping b on a.priv_id=b.priv_id where a.related_to='AGENT_USER_MGT' and a.status='ACTIVE' and b.status='INACTIVE'  and a.priv_owner='agent' and b.user_id=(Select a.user_id from st_lms_user_master a,st_lms_organization_master b where a.organization_id=b.organization_id and b.name='keyPA') and b.service_mapping_id=2 and is_start='Y';

EditPrivInventoryInActive=select a.group_name,b.status from st_lms_priviledge_rep a inner join st_lms_user_priv_mapping b on a.priv_id=b.priv_id where a.related_to='INV_MGT' and a.status='ACTIVE' and b.status='INACTIVE'  and a.priv_owner='agent' and b.user_id=(Select a.user_id from st_lms_user_master a,st_lms_organization_master b where a.organization_id=b.organization_id and b.name='keyPA') and b.service_mapping_id=2 and is_start='Y';

EditPrivHomeReportsInActive=select a.group_name,b.status from st_lms_priviledge_rep a inner join st_lms_user_priv_mapping b on a.priv_id=b.priv_id where a.related_to='REPORTS' and a.status='ACTIVE' and b.status='INACTIVE'  and a.priv_owner='agent' and b.user_id=(Select a.user_id from st_lms_user_master a,st_lms_organization_master b where a.organization_id=b.organization_id and b.name='keyPA') and b.service_mapping_id=2 and is_start='Y';

EditPrivUserManagementInActive=select a.group_name,b.status from st_lms_priviledge_rep a inner join st_lms_user_priv_mapping b on a.priv_id=b.priv_id where a.related_to='USER_MGT' and a.status='ACTIVE' and b.status='INACTIVE'  and a.priv_owner='agent' and b.user_id=(Select a.user_id from st_lms_user_master a,st_lms_organization_master b where a.organization_id=b.organization_id and b.name='keyPA') and b.service_mapping_id=2 and is_start='Y';

InvStatusReport=select a.orgCode,a.model_name,a.count from(select (select name orgCode  from dbLMS.st_lms_organization_master where organization_id=invTlb.organization_id) orgCode,organization_id,inv_model_id,sum(count) count, (select model_name from dbLMS.st_lms_inv_model_master where model_id=invTlb.inv_model_id) model_name,current_owner_type from (select    name orgCode , organization_id,inv_model_id,count(serial_no) count,current_owner_type from dbLMS.st_lms_organization_master inner join dbLMS.st_lms_inv_status on current_owner_type=organization_type and current_owner_id=organization_id where organization_type='AGENT' group by current_owner_id,inv_model_id union all select    name orgCode , parent_id,inv_model_id,count(inv_model_id) count,current_owner_type from dbLMS.st_lms_organization_master inner join dbLMS.st_lms_inv_status on current_owner_type=organization_type and current_owner_id=organization_id where organization_type='RETAILER' group by current_owner_id,inv_model_id) invTlb group by organization_id,inv_model_id) a inner join dbLMS.st_lms_inv_model_master b on b.model_id = a.inv_model_id where b.inv_id=1 order by orgCode ASC;

SearchInventoryRetailer=select name orgCode, current_owner_type,cc.inv_type,cc.inv_name, count(serial_no) 'inv_count' from dbLMS.st_lms_inv_status aa, dbLMS.st_lms_inv_model_master bb, dbLMS.st_lms_inv_master cc,dbLMS.st_lms_organization_master ee where aa.inv_model_id =  bb.model_id and aa.current_owner_id = ee.organization_id and bb.inv_id = cc.inv_id and  current_owner_type<>'REMOVED' and current_owner_type = 'RETAILER' and current_owner_id = (Select organization_id from dbLMS.st_lms_organization_master where name='keyOrgName') group by current_owner_id, bb.inv_id  order by orgCode ASC;

SearchInventoryAgent=select name orgCode, current_owner_type,cc.inv_type,cc.inv_name, count(serial_no) 'inv_count' from dbLMS.st_lms_inv_status aa, dbLMS.st_lms_inv_model_master bb, dbLMS.st_lms_inv_master cc,dbLMS.st_lms_organization_master ee where aa.inv_model_id =  bb.model_id and aa.current_owner_id = ee.organization_id and bb.inv_id = cc.inv_id and  current_owner_type<>'REMOVED' and current_owner_type = 'AGENT' and current_owner_id = (Select organization_id from dbLMS.st_lms_organization_master where name='keyOrgName') group by current_owner_id, bb.inv_id  order by orgCode ASC;

SearchInventoryBO=select name orgCode, current_owner_type,cc.inv_type,cc.inv_name, count(serial_no) 'inv_count' from dbLMS.st_lms_inv_status aa, dbLMS.st_lms_inv_model_master bb, dbLMS.st_lms_inv_master cc,dbLMS.st_lms_organization_master ee where aa.inv_model_id =  bb.model_id and aa.current_owner_id = ee.organization_id and bb.inv_id = cc.inv_id and  current_owner_type<>'REMOVED' and current_owner_type = 'BO' group by current_owner_id, bb.inv_id  order by orgCode ASC;

SearchInventoryOnlyAgent=select name orgCode, current_owner_type,cc.inv_type,cc.inv_name, count(serial_no) 'inv_count' from dbLMS.st_lms_inv_status aa, dbLMS.st_lms_inv_model_master bb, dbLMS.st_lms_inv_master cc,dbLMS.st_lms_organization_master ee where aa.inv_model_id =  bb.model_id and aa.current_owner_id = ee.organization_id and bb.inv_id = cc.inv_id and  current_owner_type<>'REMOVED' group by current_owner_id, bb.inv_id  order by orgCode ASC;

SearchInventoryDetail=select  name, current_owner_type 'owner', inv_name, brand_name, model_name, aa.serial_no,inv_code  from dbLMS.st_lms_inv_status aa, dbLMS.st_lms_inv_model_master bb, dbLMS.st_lms_inv_brand_master cc , dbLMS.st_lms_inv_master dd, dbLMS.st_lms_organization_master ee,dbLMS.st_lms_inv_mapping ff  where aa.inv_model_id = bb.model_id and bb.brand_id = cc.brand_id and cc.inv_id = dd.inv_id and bb.inv_id = dd.inv_id and name='keyOrgName' and ee.organization_id = aa.current_owner_id  and ff.serial_no=aa.serial_no and ff.inv_model_id=aa.inv_model_id  and current_owner_type!= 'REMOVED'   and bb.inv_id =(Select inv_id from dbLMS.st_lms_inv_master where inv_name='keyInvName') order by name, inv_name, brand_name, model_name, serial_no;

SearchConsInventoryOnlyAgent=select name orgCode, party_type 'current_owner_type',cc.inv_type,cc.inv_name, sum(cumm_qty_count) 'inv_count'  from dbLMS.st_lms_cons_inv_status aa, dbLMS.st_lms_cons_inv_specification bb, dbLMS.st_lms_inv_master cc, dbLMS.st_lms_organization_master ee where aa.inv_model_id =  bb.inv_model_id and aa.party_org_id = ee.organization_id and bb.inv_id = cc.inv_id   and party_type = 'AGENT' group by party_org_id, bb.inv_id  order by name ASC;

SearchConsInventoryOnlyBO=select name orgCode, party_type 'current_owner_type',cc.inv_type,cc.inv_name, sum(cumm_qty_count) 'inv_count' from dbLMS.st_lms_cons_inv_status aa, dbLMS.st_lms_cons_inv_specification bb, dbLMS.st_lms_inv_master cc, dbLMS.st_lms_organization_master ee where aa.inv_model_id =  bb.inv_model_id and aa.party_org_id = ee.organization_id and bb.inv_id = cc.inv_id   and party_type = 'BO' group by party_org_id, bb.inv_id  order by name ASC;

SearchConsInventoryAgent=select name orgCode, party_type 'current_owner_type',cc.inv_type,cc.inv_name, sum(cumm_qty_count) 'inv_count' from dbLMS.st_lms_cons_inv_status aa, dbLMS.st_lms_cons_inv_specification bb, dbLMS.st_lms_inv_master cc, dbLMS.st_lms_organization_master ee where aa.inv_model_id =  bb.inv_model_id and aa.party_org_id = ee.organization_id and bb.inv_id = cc.inv_id   and party_type = 'AGENT' and party_org_id = (Select organization_id from dbLMS.st_lms_organization_master where name='keyOrgName') group by party_org_id, bb.inv_id  order by orgCode ASC;

SearchConsInventoryCount=select  sum(cumm_qty_count) 'inv_count' from dbLMS.st_lms_cons_inv_status aa, dbLMS.st_lms_cons_inv_specification bb, dbLMS.st_lms_inv_master cc, dbLMS.st_lms_organization_master ee where aa.inv_model_id =  bb.inv_model_id and aa.party_org_id = ee.organization_id and bb.inv_id = cc.inv_id   and party_type = 'AGENT' and party_org_id = (Select organization_id from dbLMS.st_lms_organization_master where name='keyOrgName') group by party_org_id, bb.inv_id;

SearchConsInventoryAgentDetail=select  name, party_type 'owner', inv_name, concat(spec_value, '-', spec_unit, '-', spec_type) 'model_name', cumm_qty_count 'count'  from dbLMS.st_lms_cons_inv_status aa, dbLMS.st_lms_cons_inv_specification bb,  dbLMS.st_lms_inv_master dd, dbLMS.st_lms_organization_master ee where aa.inv_model_id = bb.inv_model_id and bb.inv_id = dd.inv_id and name='keyOrgName' and ee.organization_id = aa.party_org_id  and bb.inv_id =(Select inv_id from dbLMS.st_lms_inv_master where inv_name='keyInvName');

InvStatusReportRetailer=select a.orgCode,a.model_name,a.count from (select name orgCode ,(select model_name from dbLMS.st_lms_inv_model_master where model_id=inv_model_id) model_name, organization_id,inv_model_id,count(serial_no) count,current_owner_type from dbLMS.st_lms_organization_master inner join dbLMS.st_lms_inv_status on current_owner_type=organization_type and current_owner_id=organization_id where organization_type='Retailer' group by current_owner_id,inv_model_id) a inner join dbLMS.st_lms_inv_model_master b on b.model_id = a.inv_model_id  inner join (Select organization_id from dbLMS.st_lms_organization_master where parent_id=(Select organization_id from dbLMS.st_lms_organization_master where name='keyInvName')) c on a.organization_id= c.organization_id where b.inv_id=1 order by orgCode ASC;

CommissionVarienceSale=select format((select if (count(*)=0,'0',sale_comm_variance) as 'sale_comm_variance' from dbLMS.st_dg_bo_agent_sale_pwt_comm_variance where agent_org_id=(Select organization_id from dbLMS.st_lms_organization_master where name='keyAgent'))+(select  agent_sale_comm_rate from dbLMS.st_dg_game_master where game_name IN ('5/90 Indoor')),2)  as sum;

CommissionVarienceSale1=select format(if (count(*)=0,'0',sale_comm_variance),2)  as 'sale_comm_variance'  from dbLMS.st_dg_bo_agent_sale_pwt_comm_variance where agent_org_id=(Select organization_id from dbLMS.st_lms_organization_master where name='keyAgent');

CommissionVarienceSale2=select format(if (count(*)=0,'0',pwt_comm_variance),2) as 'pwt_comm_variance' from dbLMS.st_dg_bo_agent_sale_pwt_comm_variance where agent_org_id=(Select organization_id from dbLMS.st_lms_organization_master where name='keyAgent');

CommissionVariencePWT=select format((select if (count(*)=0,'0',pwt_comm_variance) as 'pwt_comm_variance' from dbLMS.st_dg_bo_agent_sale_pwt_comm_variance where agent_org_id=(Select organization_id from dbLMS.st_lms_organization_master where name='keyAgent'))+(select  agent_pwt_comm_rate from dbLMS.st_dg_game_master where game_name IN ('5/90 Indoor')),2)  as sum;

CommVarUpdate1=select (select if (count(*)=0,'0',sale_comm_variance) as 'sale_comm_variance' from dbLMS.st_dg_bo_agent_sale_pwt_comm_variance where agent_org_id=(Select organization_id from dbLMS.st_lms_organization_master where name='keyAgent'))+(select  agent_sale_comm_rate from dbLMS.st_dg_game_master where game_name IN ('5/90 Indoor'))  as sum;

CommVarUpdate2=select (select if (count(*)=0,'0',sale_comm_variance) as 'sale_comm_variance' from dbLMS.st_dg_bo_agent_sale_pwt_comm_variance where agent_org_id in(select organization_id from dbLMS.st_lms_organization_master where name=(Select organization_id from dbLMS.st_lms_organization_master where name='keyAgent')))+(select  agent_sale_comm_rate from dbLMS.st_dg_game_master where game_name IN ('5/90 Indoor'))  as sum;

DashboardAgentName=select name from dbLMS.st_lms_organization_master  where organization_type='AGENT' and organization_status in ('ACTIVE','BLOCK','INACTIVE')  order by name list_order;

DashboardAgentAvailableBal=select (available_credit-claimable_bal)  from lms_lagos_08122015.st_lms_organization_master where organization_type='AGENT' and organization_status in ('ACTIVE','BLOCK','INACTIVE') order by name  ASC;

DashboardAgentAmount=select amount from dbLMS.st_lms_cl_xcl_update_history  where organization_id in(select organization_id from dbLMS.st_lms_organization_master  where name='keyAgent') order by date_time desc  limit 1;

DashboardAgentFinalBAL=select (available_credit-claimable_bal),name from dbLMS.st_lms_organization_master where organization_status!='TERMINATE'  and organization_type='AGENT' order by name Asc;

SearchAgentRetailer=select if(a.organization_type='Agent','PA','SA') as organization_type from dbLMS.st_lms_organization_master a,dbLMS.st_lms_organization_master d,dbLMS.st_lms_state_master b,dbLMS.st_lms_country_master c  where a.state_code=b.state_code and  a.country_code=c.country_code and a.parent_id = d.organization_id  and a.organization_type in('AGENT','RETAILER')  order by a.name ASC;

SearchAgentRetailerCL=select format(a.credit_limit,2) from dbLMS.st_lms_organization_master a,dbLMS.st_lms_organization_master d,dbLMS.st_lms_state_master b,dbLMS.st_lms_country_master c  where a.state_code=b.state_code and  a.country_code=c.country_code and a.parent_id = d.organization_id and a.credit_limit>keyCL and a.organization_type in('AGENT','RETAILER')  order by a.name ASC;

SearchAgentRetailerXCL=select format(a.extended_credit_limit,2) from dbLMS.st_lms_organization_master a,dbLMS.st_lms_organization_master d,dbLMS.st_lms_state_master b,dbLMS.st_lms_country_master c  where a.state_code=b.state_code and  a.country_code=c.country_code and a.parent_id = d.organization_id and a.extended_credit_limit>keyXCL and a.organization_type in('AGENT','RETAILER')  order by a.name ASC;

SearchAgentRetailerBalance=select format(a.available_credit,2) from dbLMS.st_lms_organization_master a,dbLMS.st_lms_organization_master d,dbLMS.st_lms_state_master b,dbLMS.st_lms_country_master c  where a.state_code=b.state_code and  a.country_code=c.country_code and a.parent_id = d.organization_id and a.available_credit>keyBAL and a.organization_type in('AGENT','RETAILER')  order by a.name ASC;

SearchAgentRetailerSD=select format(a.security_deposit,2) from dbLMS.st_lms_organization_master a,dbLMS.st_lms_organization_master d,dbLMS.st_lms_state_master b,dbLMS.st_lms_country_master c  where a.state_code=b.state_code and  a.country_code=c.country_code and a.parent_id = d.organization_id and a.security_deposit>keySD and a.organization_type in('AGENT','RETAILER')  order by a.name ASC;

SearchAgentRetailerParentCode=SELECT orgCode from ( select a.organization_id, a.extends_credit_limit_upto, a.organization_type,a.parent_id,  a.name orgCode,d.name parentorgCode  ,a.organization_status,a.addr_line1,a.city,a.available_credit,a.credit_limit,a.security_deposit,a.extended_credit_limit,a.pwt_scrap,a.claimable_bal,a.unclaimable_bal,b.name 'state',c.name 'country' from dbLMS.st_lms_organization_master a,dbLMS.st_lms_organization_master d,dbLMS.st_lms_state_master b,dbLMS.st_lms_country_master c  where a.state_code=b.state_code and  a.country_code=c.country_code and a.parent_id = d.organization_id  and a.organization_type in('AGENT','RETAILER') and a.organization_type='RETAILER' and  d.name   like 'A1 Lotto%'  order by orgCode ASC  )main LEFT JOIN dbLMS.st_lms_inv_status status ON main.organization_id = status.current_owner_id inner join dbLMS.st_lms_inv_model_master b on b.model_id = inv_model_id UNION ALL SELECT orgCode from ( select a.organization_id, a.extends_credit_limit_upto, a.organization_type,a.parent_id,  a.name orgCode,d.name parentorgCode  ,a.organization_status,a.addr_line1,a.city,a.available_credit,a.credit_limit,a.security_deposit,a.extended_credit_limit,a.pwt_scrap,a.claimable_bal,a.unclaimable_bal,b.name 'state',c.name 'country' from dbLMS.st_lms_organization_master a,dbLMS.st_lms_organization_master d,dbLMS.st_lms_state_master b,dbLMS.st_lms_country_master c  where a.state_code=b.state_code and  a.country_code=c.country_code and a.parent_id = d.organization_id  and a.organization_type in('AGENT','RETAILER') and a.organization_type='RETAILER' and  d.name   like 'keyParent%'  order by orgCode ASC  )main LEFT JOIN dbLMS.st_lms_inv_status status ON main.organization_id = status.current_owner_id WHERE status.serial_no IS NULL;

SearchAgentRetailerInvCount=select (SELECT count(*) FROM dbLMS.st_lms_inv_status  a inner join dbLMS.st_lms_inv_model_master b on a.inv_model_id=b.model_id  WHERE current_owner_id =(Select organization_id from dbLMS.st_lms_organization_master where name='keyOrgName') and b.inv_id=1) + (SELECT count(*) FROM dbLMS.st_lms_inv_status inner join dbLMS.st_lms_organization_master on current_owner_id = organization_id  inner join dbLMS.st_lms_inv_model_master on inv_model_id=model_id where parent_id = (Select organization_id from dbLMS.st_lms_organization_master where name='keyOrgName') and inv_id = 1) serial_count;

SearchAgtRetCompType=Select if(organization_type='RETAILER','SA','PA') from dbLMS.st_lms_organization_master where name='keyOrgName';

SearchAgtRetCountry=Select name from dbLMS.st_lms_country_master where country_code=(Select country_code from dbLMS.st_lms_organization_master where name='keyOrgName');

SearchAgtRetState=Select name from dbLMS.st_lms_state_master  where state_code=(Select state_code from dbLMS.st_lms_organization_master where name='keyOrgName');

SearchAgtRetOrgStatus=Select organization_status from dbLMS.st_lms_organization_master where name='keyOrgName';

SearchAgtRetSD=Select format(security_deposit,2) from dbLMS.st_lms_organization_master where name='keyOrgName';

SearchAgtRetXCL=Select format(extended_credit_limit,2) from dbLMS.st_lms_organization_master where name='keyOrgName';

SearchAgtRetBAL=Select format(current_credit_amt,2) from dbLMS.st_lms_organization_master where name='keyOrgName';

UpdatePayoutSelfChain=select self_claim from dbLMS.st_lms_oranization_limits a inner join dbLMS.st_lms_organization_master b on a.organization_id=b.organization_id where b.name='Keyselect';

UpdatePayoutOtherChain=select other_claim from dbLMS.st_lms_oranization_limits a inner join dbLMS.st_lms_organization_master b on a.organization_id=b.organization_id where b.name='Keyselect';

UpdatePayoutVerificationChain=select verification_limit from dbLMS.st_lms_oranization_limits a inner join dbLMS.st_lms_organization_master b on a.organization_id=b.organization_id where b.name='keyselect';

UpdatePayoutMINCLAIM=select MIN_CLAIM_PER_TICKET from dbLMS.st_lms_oranization_limits a inner join dbLMS.st_lms_organization_master b on a.organization_id=b.organization_id where b.name='keyselect';

UpdatePayoutMAXCLAIM=select MAX_CLAIM_PER_TICKET from dbLMS.st_lms_oranization_limits a inner join dbLMS.st_lms_organization_master b on a.organization_id=b.organization_id where b.name='keyselect';

UpdatePayoutName=select name from dbLMS.st_lms_organization_master where parent_id=(Select organization_id from dbLMS.st_lms_organization_master where name='keyselect') order by name;

UpdatePayoutSelfChain1=select self_claim from dbLMS.st_lms_oranization_limits a inner join dbLMS.st_lms_organization_master b on a.organization_id=b.organization_id where b.name='keyselect';

UpdatePayoutOtherChain1=select other_claim from dbLMS.st_lms_oranization_limits a inner join dbLMS.st_lms_organization_master b on a.organization_id=b.organization_id where b.name='keyselect';

UpdatePayoutVerificationChain1=select verification_limit from dbLMS.st_lms_oranization_limits a inner join dbLMS.st_lms_organization_master b on a.organization_id=b.organization_id where b.name='keyselect';

UpdatePayoutMINCLAIM1=select MIN_CLAIM_PER_TICKET from dbLMS.st_lms_oranization_limits a inner join dbLMS.st_lms_organization_master b on a.organization_id=b.organization_id where b.name='keyselect';

UpdatePayoutMAXCLAIM1=select max_CLAIM_PER_TICKET from dbLMS.st_lms_oranization_limits a inner join dbLMS.st_lms_organization_master b on a.organization_id=b.organization_id where b.name='keyselect';

USTCCClaimatSelfRet=select claim_at_self_ret from dbLMS.st_lms_ret_sold_claim_criteria  where organization_id in (select  organization_id  from dbLMS.st_lms_user_master where user_name in('keyRet'));

USTCCClaimatSelfAgt=select claim_at_self_agt from dbLMS.st_lms_ret_sold_claim_criteria  where organization_id in (select  organization_id  from dbLMS.st_lms_user_master where user_name in('keyRet'));

USTCCClaimatOtherRetSameAgt=select claim_at_other_ret_same_agt from dbLMS.st_lms_ret_sold_claim_criteria  where organization_id in (select  organization_id  from dbLMS.st_lms_user_master where user_name in('keyRet'));

USTCCClaimatOtherRet=select claim_at_other_ret from dbLMS.st_lms_ret_sold_claim_criteria  where organization_id in (select  organization_id  from dbLMS.st_lms_user_master where user_name in('keyRet'));

USTCCClaimatOtherAgt=select claim_at_other_agt from dbLMS.st_lms_ret_sold_claim_criteria  where organization_id in (select  organization_id  from dbLMS.st_lms_user_master where user_name in('keyRet'));

USTCCClaimatBO=select claim_at_bo from dbLMS.st_lms_ret_sold_claim_criteria  where organization_id in (select  organization_id  from dbLMS.st_lms_user_master where user_name in('keyRet'));

USTCCClaimatSelfRetGHANA=select claim_at_self_ret from dbLMS.st_lms_ret_sold_claim_criteria  where organization_id in (select  organization_id  from dbLMS.st_lms_organization_master where name in('keyRet'));

USTCCClaimatSelfAgtGHANA=select claim_at_self_agt from dbLMS.st_lms_ret_sold_claim_criteria  where organization_id in (select  organization_id  from dbLMS.st_lms_organization_master where name in('keyRet'));

USTCCClaimatOtherRetSameAgtGHANA=select claim_at_other_ret_same_agt from dbLMS.st_lms_ret_sold_claim_criteria  where organization_id in (select  organization_id  from dbLMS.st_lms_organization_master where name in('keyRet'));

USTCCClaimatOtherRetGHANA=select claim_at_other_ret from dbLMS.st_lms_ret_sold_claim_criteria  where organization_id in (select  organization_id  from dbLMS.st_lms_organization_master where name in('keyRet'));

USTCCClaimatOtherAgtGHANA=select claim_at_other_agt from dbLMS.st_lms_ret_sold_claim_criteria  where organization_id in (select  organization_id  from dbLMS.st_lms_organization_master where name in('keyRet'));

USTCCClaimatBOGHANA=select claim_at_bo from dbLMS.st_lms_ret_sold_claim_criteria  where organization_id in (select  organization_id  from dbLMS.st_lms_organization_master where name in('keyRet'));

MachineEntry1=select draw_id from dbDGE.ge_draw_master_2 where draw_id not in (select draw_id from dbDGE.ge_draw_machine_entry_2) and draw_datetime>=(select DATE_FORMAT((select  STR_TO_DATE('keyStartDate','%d,%m,%Y')),'%Y-%m-%d')) AND draw_datetime<=date(now()) and draw_status='CLAIM ALLOW' order by draw_datetime;

MachineEntry2=select draw_datetime from dbDGE.ge_draw_master_2 where draw_id not in (select draw_id from dbDGE.ge_draw_machine_entry_2) and draw_datetime>=(select DATE_FORMAT((select  STR_TO_DATE('keyStartDate','%d,%m,%Y')),'%Y-%m-%d')) AND draw_datetime<=date(now()) and draw_status='CLAIM ALLOW' order by draw_datetime;

MachineEntry3=select draw_freeze_time from dbDGE.ge_draw_master_2 where draw_id not in (select draw_id from dbDGE.ge_draw_machine_entry_2) and draw_datetime>=(select DATE_FORMAT((select  STR_TO_DATE('keyStartDate','%d,%m,%Y')),'%Y-%m-%d')) AND draw_datetime<=date(now()) and draw_status='CLAIM ALLOW' order by draw_datetime;

MachineEntry4=select draw_status from dbDGE.ge_draw_master_2 where draw_id not in (select draw_id from dbDGE.ge_draw_machine_entry_2) and draw_datetime>= (select DATE_FORMAT((select  STR_TO_DATE('keyStartDate','%d,%m,%Y')),'%Y-%m-%d')) AND draw_datetime<=date(now()) and draw_status='CLAIM ALLOW' order by draw_datetime;

MachineEntry5=select perform_status from dbDGE.ge_draw_master_2 where draw_id not in (select draw_id from dbDGE.ge_draw_machine_entry_2) and draw_datetime>= (select DATE_FORMAT((select  STR_TO_DATE('keyStartDate','%d,%m,%Y')),'%Y-%m-%d')) AND draw_datetime<=date(now()) and draw_status='CLAIM ALLOW' order by draw_datetime;

Text=Select 'hsdfasdfghagsdhfghagsdhfghagjdyfijuaysudifyuiaydsiufyuiaysdiufyaiusdyfiuasidufyiuaysdiufyuiasdyfiuyasdiufyiuasdyfiuaysdfiuyasiudfyuiasdyfiuadsyfuiasydfuiasdfsdgfhasgdfhgahsgdfhgahdsgfhgahsjkdhisgtfahsdyfgahgsdhgfhjasgdhjfgajhsdgfhjgahjsdgfhjagsdhjfgahjsgdfhjagsjhdfghjasgdfjhgashjdgfhjagsdfhjgahsjdfgjhadsgfjhagsdhfjgajhsdgfjhagsdjhfgajhgdsfjhagsdhjfgajhsdgfjhgasdjhfgjhasdgfhjagsdjhfgajhsdgfjhasgdfjhgasdjhfghjasddgfhgahjsdgfhgahsdg fhjgasdhgfgfahgdsgfhgadsfghjhsdagfhgasdgfhagsdhgfhagsdhfjgjhasdgfhgaksjhdgfjhasjdkhfjkhdsfjkhajkshdfjhajksdhfjkhadsjfhjahdsjfhajdsfhjahdfjkhasdjfhjkahsdfjkhaskjdlhfjkahsdjkfhjaksdhfkjhadjskfhkjahsdfjhaskjdhfjkashdfjkhasdkjhfkjashdfjkhasdkjfhkjashdfkjhasdjkfhjkasdhfjkhasdjkfhjkasdhfjkadhsfjkhasdjkfhjkasdhfjkadhsfjkhasdjkfhjkasdhfjksdahfkjhasdjkhfkjasdhfjkkahsdfjkhasdjkfhajksdhfjkahdsjkhfajkhsdfjkhakjsdhfjkhasdjhfjkashdfjkhasdjkhfjahsdfjlasdhjfkhasjdhfjkasdhfjkashdfjhasdjfhjkasdhfajksdhfjkasdhfasdfhajksdhfkjasdhfjkhasdjkfhakjsdhfjkasdhfjasdhfhgdashfgahsdgfhgasdhgfhasdgfhgdashgfhgdsfhgdshfghsdafhdsfhgadsfh' as String;

ThirdPartyTicketDrawName=select draw_name from dbDGE.ge_draw_master_1 a inner join (select draw_id_list from dbDGE.ge_tickets_1 where ticket_number = (select ticket_nbr from dbDGE.st_dg_sale_txn_master where channel_type='USSD' order by ticket_nbr desc limit 1)) bb on a.draw_id = bb.draw_id_list;

ThirdPartyTicketDrawDateTime=select draw_datetime from dbDGE.ge_draw_master_1 a inner join (select draw_id_list from dbDGE.ge_tickets_1 where ticket_number = (select ticket_nbr from dbDGE.st_dg_sale_txn_master where channel_type='USSD' order by ticket_nbr desc limit 1)) bb on a.draw_id = bb.draw_id_list;

ThirdPartyTicketClaimTime=select distinct(trans_date) from dbDGE.st_dg_winning_txn_master a inner join (select draw_id_list from dbDGE.ge_tickets_1 where ticket_number = (select ticket_nbr from dbDGE.st_dg_sale_txn_master where channel_type='USSD' order by ticket_nbr desc limit 1)) bb on a.draw_id = bb.draw_id_list;

ThirdPartyTicketDrawStatus=select draw_status from dbDGE.ge_draw_master_1 a inner join (select draw_id_list from dbDGE.ge_tickets_1 where ticket_number = (select ticket_nbr from dbDGE.st_dg_sale_txn_master where channel_type='USSD' order by ticket_nbr desc limit 1)) bb on a.draw_id = bb.draw_id_list;

ThirdPartyTicketDrawResult=select  group_concat(' WINNING.No','\n',winning_result,'\n',' MACHINE.No ','\n',machine_result) A from (select a.draw_id,a.winning_result   from dbDGE.ge_draw_master_1 a inner join dbDGE.ge_tickets_1 b on a.draw_id =b.draw_id_list where b.ticket_number=(select ticket_nbr from dbDGE.st_dg_sale_txn_master where channel_type='USSD' order by ticket_nbr desc limit 1))c inner join dbDGE.ge_draw_machine_entry_1 d on c.draw_id =d.draw_id;

ThirdPartyTicketWinAmount=select format(sum(amount),2) from dbDGE.st_dg_winning_txn_master a inner join (select draw_id_list from dbDGE.ge_tickets_1 where ticket_number = (select ticket_nbr from dbDGE.st_dg_sale_txn_master where channel_type='USSD' order by ticket_nbr desc limit 1)) bb on a.draw_id = bb.draw_id_list;

ThirdPartyTicketClaimedStatus=select REPLACE((select concat(status,':',round(sum(amount),2) ) as A from dbDGE.st_dg_winning_txn_master where ticket_nbr =(select ticket_nbr from dbDGE.st_dg_sale_txn_master where channel_type='USSD' order by ticket_nbr desc limit 1) and status in('INITIATED') group by status order by status desc), 'INITIATED', 'PENDING') as Result; 

BlockUnBlockTicket1=select B.user_name as DoneBy from dbDGE.ge_blocked_tickets A inner join dbLMS.st_lms_user_master B on A.don_by_user_id  = B.user_id where A.ticket_number = (select ticket_number from dbDGE.ge_blocked_tickets WHERE STATUS = 'TEMPORARY_BLOCK' order by task_id desc limit 1);

BlockUnBlockTicket2=select  concat('Status For ','keyTktNbr',' has been changed For Events ',event_id) ,event_id from (select event_id   from ge_draw_master_2 a  inner join dbDGE.ge_blocked_tickets b on a.draw_id =b.draw_id where b.ticket_number=(select substring('keyTktNbr' ,1,17)))aa;

TransactionNo=select substring(d.ticket_number,15,3) as Transaction_No from (select a.ticket_number as ticket_number from dbDGE.ge_tickets_keysGameId a inner join dbLMS.st_lms_organization_master b on a.party_id=b.organization_id where a.purchase_channel='LMS_Terminal' and date(a.purchase_time) like date(keyDate) and  b.name='keyRetailer'   order by a.ticket_number desc limit 1)d

SaleTimeTrack=select date_format(purchase_time,'%Y-%m-%d %k:%i:%s') saleTime from dbDGE.ge_tickets_2  where ticket_number=(select substring('keyTktNo',1,17)) limit 1;

GameId=select game_id from dbDGE.game_master where game_name='keyGameName'

boPlayerName=select concat(a.first_name,' ',a.last_name) from dbLMS.st_lms_player_master  a inner join dbLMS.st_dg_approval_req_master b on a.player_id=b.party_id where b.request_id='reqid'  and  b.req_status='PND_MAS' group by b.ticket_nbr limit 1 ;

TransactionAgent=select  UPPER(c.name) from dbLMS.st_lms_organization_master a inner join  dbDGE.ge_tickets_1 b inner join dbLMS.st_lms_organization_master c on a.organization_id=b.party_id and a.parent_id=c.organization_id where b.ticket_number='TicketNumber';

TransactionTktNbr=select ticket_number from dbDGE.ge_tickets_1  a  inner join  dbLMS.st_lms_organization_master  c inner join dbDGE.ge_draw_master_1 b  on a.party_id=c.organization_id  and a.draw_id_list=b.draw_id where c.organization_status='ACTIVE' and a.purchase_channel='LMS_Terminal' and b.draw_status='ACTIVE'  limit 1;

TransactionOrgName=select UPPER(name) from dbLMS.st_lms_organization_master a inner join  dbDGE.ge_tickets_1 b on a.organization_id=b.party_id where b.ticket_number='TicketNumber';

TransactionMsg=select if(rpc_total<>0,concat('Ticket has Been Reprinted ',rpc_total,'Time(s).'),'Null') as RS from ge_tickets_1 where  ticket_number=(select ticket_number from(select substring('TicketNumber1',1,17) as 'ticket_number')aa) group by  ticket_number;

TransactionAgent1=select  UPPER(c.name) from dbLMS.st_lms_organization_master a inner join  dbDGE.ge_tickets_1 b inner join dbLMS.st_lms_organization_master c on a.organization_id=b.party_id and a.parent_id=c.organization_id where b.ticket_number='TicketNumber1';

TransactionAgent2=select  UPPER(c.name) from dbLMS.st_lms_organization_master a inner join  dbLMS.st_dg_ret_sale_refund_1 b inner join dbLMS.st_lms_organization_master c on a.organization_id=b.retailer_org_id and a.parent_id=c.organization_id where b.ticket_nbr='TicketNumber2';

TransactionAgent3=select  UPPER(c.name) from dbLMS.st_lms_organization_master a inner join  dbDGE.ge_tickets_1 b inner join dbLMS.st_lms_organization_master c on a.organization_id=b.party_id and a.parent_id=c.organization_id where b.ticket_number='TicketNumber3';

TransactionAgent5=select  UPPER(c.name) from dbLMS.st_lms_organization_master a inner join  dbDGE.ge_tickets_1 b inner join dbLMS.st_lms_organization_master c on a.organization_id=b.party_id and a.parent_id=c.organization_id where b.ticket_number='TicketNumber5';

TransactionAgent6=select  UPPER(c.name) from dbLMS.st_lms_organization_master a inner join  dbDGE.ge_tickets_1 b inner join dbLMS.st_lms_organization_master c on a.organization_id=b.party_id and a.parent_id=c.organization_id where b.ticket_number='TicketNo';

TransactionAgent11=select  UPPER(c.name) from dbLMS.st_lms_organization_master a inner join  dbDGE.ge_tickets_1 b inner join dbLMS.st_lms_organization_master c on a.organization_id=b.party_id and a.parent_id=c.organization_id where b.ticket_number='TicketNumber11';

TransactionAgent12=select  UPPER(c.name) from dbLMS.st_lms_organization_master a inner join  dbDGE.ge_tickets_1 b inner join dbLMS.st_lms_organization_master c on a.organization_id=b.party_id and a.parent_id=c.organization_id where b.ticket_number='TicketNumber12';

TransactionAgent13=select  UPPER(c.name) from dbLMS.st_lms_organization_master a inner join  dbDGE.ge_tickets_1 b inner join dbLMS.st_lms_organization_master c on a.organization_id=b.party_id and a.parent_id=c.organization_id where b.ticket_number='TicketNumber13';

TransactionAgent14=select  UPPER(c.name) from dbLMS.st_lms_organization_master a inner join  dbDGE.ge_tickets_1 b inner join dbLMS.st_lms_organization_master c on a.organization_id=b.party_id and a.parent_id=c.organization_id where b.ticket_number='TicketNumber14';

TransactionAgent15=select  UPPER(c.name) from dbLMS.st_lms_organization_master a inner join  dbDGE.ge_tickets_1 b inner join dbLMS.st_lms_organization_master c on a.organization_id=b.party_id and a.parent_id=c.organization_id where b.ticket_number='TicketNumber15';

TransactionAgent16=select  UPPER(c.name) from dbLMS.st_lms_organization_master a inner join  dbDGE.ge_tickets_1 b inner join dbLMS.st_lms_organization_master c on a.organization_id=b.party_id and a.parent_id=c.organization_id where b.ticket_number='TicketNumber16';

TransactionAgent17=select  UPPER(c.name) from dbLMS.st_lms_organization_master a inner join  dbDGE.ge_tickets_1 b inner join dbLMS.st_lms_organization_master c on a.organization_id=b.party_id and a.parent_id=c.organization_id where b.ticket_number='TicketNumber17';

TransactionAgent22=select  UPPER(c.name) from dbLMS.st_lms_organization_master a inner join  dbDGE.ge_tickets_1 b inner join dbLMS.st_lms_organization_master c on a.organization_id=b.party_id and a.parent_id=c.organization_id where b.ticket_number='TicketNumber22';

TransactionAgent18=select  UPPER(c.name) from dbLMS.st_lms_organization_master a inner join  dbDGE.ge_tickets_1 b inner join dbLMS.st_lms_organization_master c on a.organization_id=b.party_id and a.parent_id=c.organization_id where b.ticket_number='TicketNumber18';

TransactionAgent19=select  UPPER(c.name) from dbLMS.st_lms_organization_master a inner join  dbDGE.ge_tickets_1 b inner join dbLMS.st_lms_organization_master c on a.organization_id=b.party_id and a.parent_id=c.organization_id where b.ticket_number='TicketNumber19';

TransactionAgent20=select  UPPER(c.name) from dbLMS.st_lms_organization_master a inner join  dbDGE.ge_tickets_1 b inner join dbLMS.st_lms_organization_master c on a.organization_id=b.party_id and a.parent_id=c.organization_id where b.ticket_number='TicketNumber20';

TransactionAgent21=select  UPPER(c.name) from dbLMS.st_lms_organization_master a inner join  dbDGE.ge_tickets_1 b inner join dbLMS.st_lms_organization_master c on a.organization_id=b.party_id and a.parent_id=c.organization_id where b.ticket_number='TicketNumber21';

NonWinAmt=select '0.00' Win from dbDGE.ge_draw_ticket_keyGameID_keyDrawID a where  a.ticket_number=(select substring('keyTktNo',1,17)) group by a.line_id;

WinAmt=select IF(sum((a.bet_amount_multiple * a.unit_price *b.prize_amount)/b.unit_price)<>0,sum((a.bet_amount_multiple * a.unit_price *b.prize_amount)/b.unit_price),'0.00') Win from dbDGE.ge_draw_ticket_keyGameID_keyDrawID a inner join dbDGE.ge_prize_details_keyGameID b on a.prize_rank=b.prize_rank where a.status not in('cancelled') and b.draw_id=keyDrawID and a.ticket_number=(select substring('keyTktNo',1,17));

TicketNumber1=select  ticket_number from dbDGE.ge_tickets_1 a inner join dbLMS.st_lms_organization_master b on a.party_id=b.organization_id where a.purchase_channel='LMS_Terminal' and b.organization_status='ACTIVE' and a.rpc_total<>0 limit 1;

TicketNumber2=SELECT b.ticket_number  from dbLMS.st_dg_ret_sale_refund_1 a inner join dbDGE.ge_tickets_1 b inner join dbLMS.st_lms_organization_master c on a.ticket_nbr=b.ticket_number and a.retailer_org_id=c.organization_id where c.organization_status='ACTIVE' limit 1;

TicketNumber3=select ticket_number from dbDGE.ge_tickets_1  a  inner join dbDGE.ge_draw_master_1 b  inner join  dbLMS.st_lms_organization_master  c on a.party_id=c.organization_id and a.draw_id_list=b.draw_id where c.organization_status='ACTIVE' and a.purchase_channel='LMS_Terminal' and  b.draw_status='ACTIVE' limit 1;

TicketNumber5=select ticket_number from dbDGE.ge_tickets_1  a  inner join dbDGE.ge_draw_master_1 b  inner join  dbLMS.st_lms_organization_master  c on a.party_id=c.organization_id and a.draw_id_list=b.draw_id where c.organization_status='ACTIVE' and a.purchase_channel='LMS_Terminal' and  b.draw_status='ACTIVE' and a.draw_id_list like '%,%'  limit 1;

TicketNumber11=select ticket_number from dbDGE.ge_tickets_1 a inner join  dbDGE.ge_draw_master_1 b inner join  dbLMS.st_lms_organization_master  c on a.party_id=c.organization_id and a.draw_id_list=b.draw_id  where c.organization_status='ACTIVE' and b.verification_date >(select now()) and b.draw_status='FREEZE'  and a.purchase_channel='LMS_Terminal' limit 1;

TicketNumber12=select ticket_number from dbDGE.ge_tickets_1 a inner join dbDGE.ge_draw_master_1 b inner join  dbLMS.st_lms_organization_master  c on a.party_id=c.organization_id and a.draw_id_list=b.draw_id  where c.organization_status='ACTIVE' and b.verification_date <(select now()) and b.draw_status='FREEZE' and b.claim_start_date > (select now()) and a.purchase_channel='LMS_Terminal' limit 1;

TicketNumber13=select ticket_number from dbDGE.ge_tickets_1 a inner join dbDGE.ge_draw_master_1 b inner join  dbLMS.st_lms_organization_master  c on a.party_id=c.organization_id and a.draw_id_list=b.draw_id where c.organization_status='ACTIVE' and b.draw_freeze_time< (select now()) and b.claim_start_date < (select now())  and  b.claim_end_date > (select now())  and b.draw_status='freeze' and a.purchase_channel='LMS_Terminal' limit 1;

TicketNumber14=select ticket_number from dbDGE.ge_tickets_1 a inner join dbDGE.ge_draw_master_1 b inner join dbLMS.st_lms_organization_master  c on a.party_id=c.organization_id and a.draw_id_list=b.draw_id where c.organization_status='ACTIVE' and b.claim_end_date <= (select now()) and b.verification_date > (select now()) and b.draw_status='freeze' and a.purchase_channel='LMS_Terminal' limit 1;

TicketNumber15=select ticket_number from dbDGE.ge_tickets_1 a inner join dbDGE.ge_draw_master_1 b inner join  dbLMS.st_lms_organization_master  c on a.party_id=c.organization_id and a.draw_id_list=b.draw_id where c.organization_status='ACTIVE'  and b.draw_status='CLAIM HOLD'  and b.verification_date > (select now()) and a.purchase_channel='LMS_Terminal' limit 1;
 
TicketNumber16=select ticket_number from dbDGE.ge_tickets_1 a inner join dbDGE.ge_draw_master_1 b inner join dbLMS.st_lms_organization_master  c on a.party_id=c.organization_id and a.draw_id_list=b.draw_id where c.organization_status='ACTIVE'  and b.draw_status='CLAIM HOLD'  and b.verification_date < (select now()) and b.claim_start_date > (select now()) and a.purchase_channel='LMS_Terminal' limit 1;

TicketNumber17=select ticket_number from dbDGE.ge_tickets_1 a inner join dbDGE.ge_draw_master_1 b inner join  dbLMS.st_lms_organization_master  c on a.party_id=c.organization_id and  a.draw_id_list=b.draw_id where c.organization_status='ACTIVE' and b.draw_status='CLAIM HOLD'  and b.claim_start_date < (select now()) and a.purchase_channel='LMS_Terminal' limit 1;

TicketNumber18=select ticket_number from dbDGE.ge_tickets_1 a inner join dbDGE.ge_draw_master_1 b inner join dbLMS.st_lms_organization_master  c on a.party_id=c.organization_id and  a.draw_id_list=b.draw_id where c.organization_status='ACTIVE' and b.winning_result<> 0 and b.draw_status='CLAIM HOLD'  and b.claim_end_date < (select now()) and a.purchase_channel='LMS_Terminal' limit 1;

TicketNumber19=select ticket_number from dbDGE.ge_tickets_1 a inner join dbDGE.ge_draw_master_1 b inner join dbLMS.st_lms_organization_master  c on a.party_id=c.organization_id and  a.draw_id_list=b.draw_id  where c.organization_status='ACTIVE' and b.winning_result<> 0 and b.draw_status='CLAIM ALLOW'  and b.verification_date > (select now()) and a.purchase_channel='LMS_Terminal' limit 1;

TicketNumber20=select ticket_number from dbDGE.ge_tickets_1 a inner join dbDGE.ge_draw_master_1 b inner join dbLMS.st_lms_organization_master  c on a.party_id=c.organization_id and a.draw_id_list=b.draw_id where c.organization_status='ACTIVE' and b.winning_result<> 0 and b.draw_status='CLAIM ALLOW'  and b.verification_date < (select now()) and b.claim_start_date > (select now()) and a.purchase_channel='LMS_Terminal' limit 1;

TicketNumber21=select ticket_number from dbDGE.ge_tickets_1 a inner join dbDGE.ge_draw_master_1 b  inner join  dbLMS.st_lms_organization_master  c on a.party_id=c.organization_id and a.draw_id_list=b.draw_id where c.organization_status='ACTIVE' and  b.winning_result<> 0 and b.draw_status='CLAIM ALLOW'  and b.claim_start_date < (select now())  and a.purchase_channel='LMS_Terminal' limit 1;

TicketNumber22=select ticket_number from dbDGE.ge_tickets_1 a inner join dbDGE.ge_draw_master_1 b inner join  dbLMS.st_lms_organization_master  c on a.party_id=c.organization_id and a.draw_id_list=b.draw_id where c.organization_status='ACTIVE' and  b.winning_result<> 0 and b.draw_status='CLAIM ALLOW'  and b.claim_end_date < (select now()) and a.purchase_channel='LMS_Terminal' limit 1;

Status1=select if(draw_status='CLAIM HOLD' and claim_start_date> now() and  verification_date< now(),'CLAIM PENDING','null') as 'Draw Id' from dbDGE.ge_tickets_1 a join dbDGE.ge_draw_master_1 b on a.draw_id_list=b.draw_id where a.ticket_number='TicketNumber16' group by a.ticket_number;

Status2=select if( a.draw_status='CLAIM HOLD' and a.claim_start_date<now(),'RESULT AWAITED','NULL') as 'Draw Status' from dbDGE.ge_draw_master_1 a join dbDGE.ge_tickets_1 b on a.draw_id=b.draw_id_list  where b.ticket_number='TicketNumber17' group by b.ticket_number;

Status3=select if( a.draw_status='CLAIM HOLD' and a.claim_end_date<now(),'DRAW EXPIRED','NULL') as 'Draw Status' from dbDGE.ge_draw_master_1 a join dbDGE.ge_tickets_1 b on a.draw_id=b.draw_id_list  where b.ticket_number='TicketNumber18' group by b.ticket_number;

Status4=select if( a.draw_status='CLAIM ALLOW' and a.claim_end_date<now(),'DRAW EXPIRED','NULL') as 'Draw Status' from dbDGE.ge_draw_master_1 a join dbDGE.ge_tickets_1 b on a.draw_id=b.draw_id_list  where b.ticket_number='TicketNumber22' group by b.ticket_number;

Status5=select if( a.draw_status='CLAIM ALLOW' and a.claim_end_date<now(),'DRAW EXPIRED','NULL') as 'Draw Status' from dbDGE.ge_draw_master_1 a join dbDGE.ge_tickets_1 b on a.draw_id=b.draw_id_list  where b.ticket_number='TicketNumber22' group by b.ticket_number;

Status6=select if( a.draw_status='CLAIM ALLOW' and a.claim_start_date<now() and a.claim_end_date>now(),'CLAIM ALLOW','NULL') as 'Draw Status' from dbDGE.ge_draw_master_1 a join dbDGE.ge_tickets_1 b on a.draw_id=b.draw_id_list  where b.ticket_number='TicketNumber21' group by b.ticket_number;

Status7=select if( a.draw_status='CLAIM ALLOW' and a.verification_date>now(),'VERIFICATION PENDING','NULL') as 'Draw Status' from dbDGE.ge_draw_master_1 a join dbLMS.ge_tickets_1 b on a.draw_id=b.draw_id_list  where b.ticket_number='TicketNumber19' group by b.ticket_number;

Status8=select if( a.draw_status='CLAIM ALLOW' and a.claim_start_date>now() and a.verification_date<now(),'CLAIM PENDING','NULL') as 'Draw Status' from dbDGE.ge_draw_master_1 a join dbDGE.ge_tickets_1 b on a.draw_id=b.draw_id_list  where b.ticket_number='TicketNumber20' group by b.ticket_number;

Status9=select if( a.draw_status='freeze' and a.claim_start_date<now() and a.claim_end_date>now() ,'RESULT AWAITED','NULL') as 'Draw Status' from dbDGE.ge_draw_master_1 a join dbDGE.ge_tickets_1 b on a.draw_id=b.draw_id_list  where b.ticket_number='TicketNumber13' group by b.ticket_number;

Status10=select if( (a.draw_status='FREEZE' and a.claim_end_date<now() and a.verification_date>now()),'DRAW EXPIRED','NULL') as 'Draw Status' from dbDGE.ge_draw_master_1 a join dbDGE.ge_tickets_1 b on a.draw_id=b.draw_id_list  where b.ticket_number='TicketNumber14' group by b.ticket_number;

Status11=select if( (a.draw_status='FREEZE' and a.claim_start_date>now() and a.verification_date<now()),'CLAIM PENDING','NULL') as 'Draw Status' from dbDGE.ge_draw_master_1 a join dbDGE.ge_tickets_1 b on a.draw_id=b.draw_id_list  where b.ticket_number='TicketNumber12' group by b.ticket_number;

Status12=select if( (a.draw_status='FREEZE' and a.verification_date>now()),'VERIFICATION PENDING','NULL') as 'Draw Status' from dbDGE.ge_draw_master_1 a join dbDGE.ge_tickets_1 b on a.draw_id=b.draw_id_list  where b.ticket_number='TicketNumber11' group by b.ticket_number;

Status13=select if( (a.draw_status='Cancel' and a.verification_date<now()),'DRAW CANCELLED','NULL') as 'Draw Status' from dbDGE.ge_draw_master_2 a join dbDGE.ge_tickets_2 b on a.draw_id=b.draw_id_list  where b.ticket_number='TicketNo' group by b.ticket_number;

Status14=select if( (a.draw_status='ACTIVE' and a.verification_date>now()),'VERIFICATION PENDING','NULL') as 'Draw Status' from dbDGE.ge_draw_master_1 a join dbDGE.ge_tickets_1 b on a.draw_id=b.draw_id_list  where b.ticket_number='TicketNumber3' group by b.ticket_number;

Status15=

Status16=select if((b.draw_status='CLAIM HOLD'  and  b.verification_date>now()),'VERIFICATION PENDING','null') as 'Draw Status' from dbDGE.ge_tickets_15 a join dbDGE.ge_draw_master_15 b on a.draw_id_list=b.draw_id where a.ticket_number='TicketNumber15' group by a.ticket_number;

ActiveDrawData=select draw_id,draw_datetime,draw_freeze_time,draw_status,draw_name from dbDGE.ge_draw_master_KeyGameId where draw_status='Active' and draw_datetime between (select DATE_FORMAT((select  STR_TO_DATE('KeyFromDate','%d,%m,%Y')),'%Y-%m-%d')) and  (select DATE_FORMAT((select  STR_TO_DATE('KeyToDate','%d,%m,%Y')),'%Y-%m-%d'));

FreezeDrawData=select draw_id,draw_datetime,draw_freeze_time,draw_status,draw_name from dbDGE.ge_draw_master_KeyGameId where draw_status='Freeze' and draw_datetime between (select DATE_FORMAT((select  STR_TO_DATE('KeyFromDate','%d,%m,%Y')),'%Y-%m-%d')) and  (select DATE_FORMAT((select  STR_TO_DATE('KeyToDate','%d,%m,%Y')),'%Y-%m-%d'));

InactiveDrawData=select draw_id,draw_datetime,draw_freeze_time,draw_status,draw_name from dbDGE.ge_draw_master_KeyGameId where draw_status='Inactive' and draw_datetime between (select DATE_FORMAT((select  STR_TO_DATE('KeyFromDate','%d,%m,%Y')),'%Y-%m-%d')) and  (select DATE_FORMAT((select  STR_TO_DATE('KeyToDate','%d,%m,%Y')),'%Y-%m-%d'));

ClaimAllowDrawData=select draw_id,draw_datetime,draw_freeze_time,draw_status,draw_name,winning_result from dbDGE.ge_draw_master_KeyGameId where draw_status='Claim Allow' and draw_datetime between (select DATE_FORMAT((select  STR_TO_DATE('KeyFromDate','%d,%m,%Y')),'%Y-%m-%d')) and  (select DATE_FORMAT((select  STR_TO_DATE('KeyToDate','%d,%m,%Y')),'%Y-%m-%d'));

ClaimHoldDrawData=select draw_id,draw_datetime,draw_freeze_time,draw_status,draw_name,winning_result from dbDGE.ge_draw_master_KeyGameId where draw_status='Claim Hold' and draw_datetime between (select DATE_FORMAT((select  STR_TO_DATE('KeyFromDate','%d,%m,%Y')),'%Y-%m-%d')) and  (select DATE_FORMAT((select  STR_TO_DATE('KeyToDate','%d,%m,%Y')),'%Y-%m-%d'));

BOResultApproval=select aa.*,bb.user2_name,bb.user2_result,bb.UserMachine2Result,bb.user2_update_time from (select a.draw_id, c.draw_datetime DrawDatetime,c.draw_name DrawName, concat(first_name,' ',last_name)as user1_name,user1_result,user1_mac_result UserMachineResult, user1_update_time from dbDGE.ge_result_submission_keygameid a inner join dbLMS.st_lms_user_contact_details b on a.user1_id= b.user_id inner join dbDGE.ge_draw_master_keygameid c on a.draw_id =c.draw_id where  date(draw_datetime)>=date((select DATE_FORMAT((select  STR_TO_DATE('keyFromDate','%d,%m,%Y')),'%Y-%m-%d %k:%i:%s'))) and date(draw_datetime)<=date((select DATE_FORMAT((select  STR_TO_DATE('keyToDate','%d,%m,%Y')),'%Y-%m-%d %k:%i:%s'))) and a.status='unmatched')aa inner join(select  concat(first_name,' ',last_name) as user2_name,user2_result,a.draw_id, user2_update_time,user2_mac_result UserMachine2Result from dbDGE.ge_result_submission_keygameid a inner join dbLMS.st_lms_user_contact_details b on a.user2_id= b.user_id inner join dbDGE.ge_draw_master_keygameid c on a.draw_id =c.draw_id where  date(draw_datetime)>=date((select DATE_FORMAT((select  STR_TO_DATE('keyFromDate','%d,%m,%Y')),'%Y-%m-%d %k:%i:%s'))) and date(draw_datetime)<=date((select DATE_FORMAT((select  STR_TO_DATE('keyToDate','%d,%m,%Y')),'%Y-%m-%d %k:%i:%s')))  and a.status='unmatched' )bb on aa.draw_id =bb.draw_id;

claimCondition=update dbDGE.ge_draw_master_keygameid set draw_status='CLAIM HOLD' where draw_status= if ((Select * from (Select Count(draw_id) from dbDGE.ge_draw_master_keygameid where draw_datetime>='keyFromDate' and date(draw_datetime)<=(select now()) and draw_status='CLAIM HOLD') as t)>0,'CLAIM HOLD','CLAIM ALLOW') ORDER BY draw_id DESC LIMIT 1;

pwtVerificationWinningAmount=Select concat('Winning amount: ', (select format(sum((a.bet_amount_multiple * a.unit_price * b.prize_amount)/b.unit_price),1) WinningAmt from dbDGE.ge_draw_ticket_2_KeyDrawId a inner join dbDGE.ge_prize_details_2 b on a.prize_rank=b.prize_rank where a.status!='cancelled' and b.draw_id=KeyDrawId and a.ticket_number = ((Select SUBSTRING('keyticketNbr', 1, CHAR_LENGTH('keyticketNbr') - 1) AS col_trimmed)) group by a.prize_rank)) as WinAmount;

pwtVerificationLowPrizeWinAmount=Select concat('Please pay NGN ', (select format(sum((a.bet_amount_multiple * a.unit_price * b.prize_amount)/b.unit_price),1) WinningAmt from dbDGE.ge_draw_ticket_2_KeyDrawId a inner join dbDGE.ge_prize_details_2 b on a.prize_rank=b.prize_rank where a.status!='cancelled' and b.draw_id=KeyDrawId and a.ticket_number = ((Select SUBSTRING('keyticketNbr', 1, CHAR_LENGTH('keyticketNbr') - 1) AS col_trimmed)) group by a.prize_rank),'to the Player .') as WinAmount;

DGMgmtActiveChangeDrawTime=UPDATE dbDGE.ge_draw_master_KeyGameId A INNER JOIN (Select draw_id, draw_status from dbDGE.ge_draw_master_KeyGameId where date(draw_datetime)>=('KeyFromDate') and date(draw_datetime)<=('KeyToDate') and draw_status='INACTIVE' ORDER BY draw_id DESC LIMIT 1)as  main ON A.draw_id=main.draw_id SET A.draw_status='ACTIVE';

DGMgmtFreeze=UPDATE dbDGE.ge_draw_master_KeyGameId A INNER JOIN (Select draw_id, draw_status from dbDGE.ge_draw_master_KeyGameId where date(draw_datetime)>=('KeyFromDate') and date(draw_datetime)<=('KeyToDate') and draw_status='ACTIVE' ORDER BY draw_id DESC LIMIT 1)as  main ON A.draw_id=main.draw_id SET A.draw_status='FREEZE';

PrivilegeReports1=(select  um.user_name, concat(first_name,' ', last_name),role_name, if(isrolehead='N','Not Head','Head'),um.status from dbLMS.st_lms_user_master um, dbLMS.st_lms_user_contact_details ucd, dbLMS.st_lms_role_master rm, (select * from dbLMS.st_lms_user_priv_mapping where service_mapping_id IN (select service_delivery_master_id from dbLMS.st_lms_service_delivery_master where service_id = '1' and interface = 'WEB') and status = 'ACTIVE' and priv_id IN (69) and role_id IN (select role_id from dbLMS.st_lms_role_master where tier_id = 1)) upm where um.user_id = upm.user_id and upm.user_id = ucd.user_id and um.role_id = rm.role_id and um.parent_user_id !=0 and um.status <> 'TERMINATE' and um.role_id = 1 ) union (select  um.user_name, concat(first_name,' ', last_name), role_name,if(isrolehead='N','Not Head','Head'),um.status from dbLMS.st_lms_user_master um, dbLMS.st_lms_user_contact_details ucd, dbLMS.st_lms_role_master rm, (select * from dbLMS.st_lms_user_priv_mapping where service_mapping_id IN (select service_delivery_master_id from dbLMS.st_lms_service_delivery_master where service_id = '1' and interface = 'WEB') and status = 'ACTIVE' and priv_id IN (69) and role_id IN (select role_id from dbLMS.st_lms_role_master where tier_id = 1)) upm where um.user_id = upm.user_id and upm.user_id = ucd.user_id and um.role_id = rm.role_id and um.parent_user_id !=0 and um.status <> 'TERMINATE' and um.role_id != 1 and um.isrolehead = 'Y');

PrivilegeReports2=(select distinct(group_name) from dbLMS.st_lms_priviledge_rep where priv_id IN (select priv_id from dbLMS.st_lms_user_priv_mapping where service_mapping_id IN (select service_delivery_master_id from dbLMS.st_lms_service_delivery_master where service_id = 1 )and user_id = (Select user_id from dbLMS.st_lms_user_master where user_name ='keyUserName') and status = 'ACTIVE') and related_to = 'ACT_MGT' and is_start = 'Y') union (select distinct(group_name) from dbLMS.st_lms_priviledge_rep where priv_id IN (select priv_id from dbLMS.st_lms_user_priv_mapping where service_mapping_id IN (select service_delivery_master_id from dbLMS.st_lms_service_delivery_master where service_id = 1 )and user_id = (Select user_id from dbLMS.st_lms_user_master where user_name ='keyUserName') and status = 'ACTIVE') and related_to = 'REPORTS' and is_start = 'Y') union (select distinct(group_name) from dbLMS.st_lms_priviledge_rep where priv_id IN (select priv_id from dbLMS.st_lms_user_priv_mapping where service_mapping_id IN (select service_delivery_master_id from dbLMS.st_lms_service_delivery_master where service_id = 1 )and user_id = (Select user_id from dbLMS.st_lms_user_master where user_name ='keyUserName') and status = 'ACTIVE') and related_to = 'USER_MGT' and is_start = 'Y') union (select distinct(group_name) from dbLMS.st_lms_priviledge_rep where priv_id IN (select priv_id from dbLMS.st_lms_user_priv_mapping where service_mapping_id IN (select service_delivery_master_id from dbLMS.st_lms_service_delivery_master where service_id = 1 )and user_id = (Select user_id from dbLMS.st_lms_user_master where user_name ='keyUserName') and status = 'ACTIVE') and related_to = 'BO_USER_MGT' and is_start = 'Y') union (select distinct(group_name) from dbLMS.st_lms_priviledge_rep where priv_id IN (select priv_id from dbLMS.st_lms_user_priv_mapping where service_mapping_id IN (select service_delivery_master_id from dbLMS.st_lms_service_delivery_master where service_id = 1 )and user_id = (Select user_id from dbLMS.st_lms_user_master where user_name ='keyUserName') and status = 'ACTIVE') and related_to = 'INV_MGT' and is_start = 'Y') union (select distinct(group_name) from dbLMS.st_lms_priviledge_rep where priv_id IN (select priv_id from dbLMS.st_lms_user_priv_mapping where service_mapping_id IN (select service_delivery_master_id from dbLMS.st_lms_service_delivery_master where service_id = 1 )and user_id = (Select user_id from dbLMS.st_lms_user_master where user_name ='keyUserName') and status = 'ACTIVE') and related_to = 'ROLE_MGT' and is_start = 'Y') union (select distinct(a.related_to) from (select distinct(group_name), related_to from dbLMS.st_dg_priviledge_rep where priv_id IN (select priv_id from dbLMS.st_lms_user_priv_mapping where service_mapping_id IN (select service_delivery_master_id from dbLMS.st_lms_service_delivery_master where service_id = 3 ) and user_id = (Select user_id from dbLMS.st_lms_user_master where user_name ='keyUserName') and status = 'ACTIVE')) a) union (select distinct(group_name) from dbLMS.st_dg_priviledge_rep where priv_id IN (select priv_id from dbLMS.st_lms_user_priv_mapping where service_mapping_id IN (select service_delivery_master_id from dbLMS.st_lms_service_delivery_master where service_id = 3 )and user_id = (Select user_id from dbLMS.st_lms_user_master where user_name ='keyUserName') and status = 'ACTIVE') and related_to = 'DRAW_MGT' and is_start = 'Y') union (select distinct(group_name) from dbLMS.st_dg_priviledge_rep where priv_id IN (select priv_id from dbLMS.st_lms_user_priv_mapping where service_mapping_id IN (select service_delivery_master_id from dbLMS.st_lms_service_delivery_master where service_id = 3 )and user_id = (Select user_id from dbLMS.st_lms_user_master where user_name ='keyUserName') and status = 'ACTIVE') and related_to = 'PLAY_MGT' and is_start = 'Y') union (select distinct(group_name) from dbLMS.st_dg_priviledge_rep where priv_id IN (select priv_id from dbLMS.st_lms_user_priv_mapping where service_mapping_id IN (select service_delivery_master_id from dbLMS.st_lms_service_delivery_master where service_id = 3 )and user_id = (Select user_id from dbLMS.st_lms_user_master where user_name ='keyUserName') and status = 'ACTIVE') and related_to = 'REPORTS' and is_start = 'Y') union (select distinct(group_name) from dbLMS.st_dg_priviledge_rep where priv_id IN (select priv_id from dbLMS.st_lms_user_priv_mapping where service_mapping_id IN (select service_delivery_master_id from dbLMS.st_lms_service_delivery_master where service_id = 3 )and user_id = (Select user_id from dbLMS.st_lms_user_master where user_name ='keyUserName') and status = 'ACTIVE') and related_to = 'PWT' and is_start = 'Y');

# === Additional==========================================

SELECT parentorgCode from ( select a.organization_id, a.extends_credit_limit_upto, a.organization_type,a.parent_id,  a.name orgCode,d.name parentorgCode  ,a.organization_status,a.addr_line1,a.city,a.available_credit,a.credit_limit,a.security_deposit,a.extended_credit_limit,a.pwt_scrap,a.claimable_bal,a.unclaimable_bal,b.name 'state',c.name 'country' from st_lms_organization_master a,st_lms_organization_master d,st_lms_state_master b,st_lms_country_master c  where a.state_code=b.state_code and  a.country_code=c.country_code and a.parent_id = d.organization_id  and a.organization_type in('AGENT','RETAILER') and a.organization_type='RETAILER' and  d.name   like 'A1 Lotto%'  order by orgCode ASC  )main LEFT JOIN st_lms_inv_status status ON main.organization_id = status.current_owner_id inner join st_lms_inv_model_master b on b.model_id = inv_model_id UNION ALL SELECT parentorgCode from ( select a.organization_id, a.extends_credit_limit_upto, a.organization_type,a.parent_id,  a.name orgCode,d.name parentorgCode  ,a.organization_status,a.addr_line1,a.city,a.available_credit,a.credit_limit,a.security_deposit,a.extended_credit_limit,a.pwt_scrap,a.claimable_bal,a.unclaimable_bal,b.name 'state',c.name 'country' from st_lms_organization_master a,st_lms_organization_master d,st_lms_state_master b,st_lms_country_master c  where a.state_code=b.state_code and  a.country_code=c.country_code and a.parent_id = d.organization_id  and a.organization_type in('AGENT','RETAILER') and a.organization_type='RETAILER' and  d.name   like 'A1 Lotto%'  order by orgCode ASC  )main LEFT JOIN st_lms_inv_status status ON main.organization_id = status.current_owner_id WHERE status.serial_no IS NULL;

SELECT  organization_status from ( select a.organization_id, a.extends_credit_limit_upto, a.organization_type,a.parent_id,  a.name orgCode,d.name parentorgCode  ,a.organization_status,a.addr_line1,a.city,a.available_credit,a.credit_limit,a.security_deposit,a.extended_credit_limit,a.pwt_scrap,a.claimable_bal,a.unclaimable_bal,b.name 'state',c.name 'country' from st_lms_organization_master a,st_lms_organization_master d,st_lms_state_master b,st_lms_country_master c  where a.state_code=b.state_code and  a.country_code=c.country_code and a.parent_id = d.organization_id  and a.organization_type in('AGENT','RETAILER') and a.organization_type='RETAILER' and  d.name   like 'A1 Lotto%'  order by orgCode ASC  )main LEFT JOIN st_lms_inv_status status ON main.organization_id = status.current_owner_id inner join st_lms_inv_model_master b on b.model_id = inv_model_id UNION ALL SELECT organization_status from ( select a.organization_id, a.extends_credit_limit_upto, a.organization_type,a.parent_id,  a.name orgCode,d.name parentorgCode  ,a.organization_status,a.addr_line1,a.city,a.available_credit,a.credit_limit,a.security_deposit,a.extended_credit_limit,a.pwt_scrap,a.claimable_bal,a.unclaimable_bal,b.name 'state',c.name 'country' from st_lms_organization_master a,st_lms_organization_master d,st_lms_state_master b,st_lms_country_master c  where a.state_code=b.state_code and  a.country_code=c.country_code and a.parent_id = d.organization_id  and a.organization_type in('AGENT','RETAILER') and a.organization_type='RETAILER' and  d.name   like 'A1 Lotto%'  order by orgCode ASC  )main LEFT JOIN st_lms_inv_status status ON main.organization_id = status.current_owner_id WHERE status.serial_no IS NULL;

SELECT parentorgCode from ( select a.organization_id, a.extends_credit_limit_upto, a.organization_type,a.parent_id,  a.name orgCode,d.name parentorgCode  ,a.organization_status,a.addr_line1,a.city,a.available_credit,a.credit_limit,a.security_deposit,a.extended_credit_limit,a.pwt_scrap,a.claimable_bal,a.unclaimable_bal,b.name 'state',c.name 'country' from st_lms_organization_master a,st_lms_organization_master d,st_lms_state_master b,st_lms_country_master c  where a.state_code=b.state_code and  a.country_code=c.country_code and a.parent_id = d.organization_id  and a.organization_type in('AGENT','RETAILER') and a.organization_type='RETAILER' and  d.name   like 'A1 Lotto%'  order by orgCode ASC  )main LEFT JOIN st_lms_inv_status status ON main.organization_id = status.current_owner_id inner join st_lms_inv_model_master b on b.model_id = inv_model_id UNION ALL SELECT parentorgCode from ( select a.organization_id, a.extends_credit_limit_upto, a.organization_type,a.parent_id,  a.name orgCode,d.name parentorgCode  ,a.organization_status,a.addr_line1,a.city,a.available_credit,a.credit_limit,a.security_deposit,a.extended_credit_limit,a.pwt_scrap,a.claimable_bal,a.unclaimable_bal,b.name 'state',c.name 'country' from st_lms_organization_master a,st_lms_organization_master d,st_lms_state_master b,st_lms_country_master c  where a.state_code=b.state_code and  a.country_code=c.country_code and a.parent_id = d.organization_id  and a.organization_type in('AGENT','RETAILER') and a.organization_type='RETAILER' and  d.name   like 'A1 Lotto%'  order by orgCode ASC  )main LEFT JOIN st_lms_inv_status status ON main.organization_id = status.current_owner_id WHERE status.serial_no IS NULL;

# === /Additional==========================================

UpdateTrainingExpensePAName=select orgCode from (select organization_id,orgCode,training_exp_default,training_exp_var,training_exp_extra,extra_training_exp_var,incentive_exp_default,incentive_exp_var from (select organization_id, name orgCode  ,ifnull(training_exp_var,0.0) training_exp_var,ifnull(extra_training_exp_var,0.0)extra_training_exp_var,ifnull(incentive_exp_var,0.0) incentive_exp_var from st_lms_organization_master left outer join (select agent_org_id,training_exp_var,extra_training_exp_var,incentive_exp_var from st_lms_agent_daily_trng_exp_var_mapping  where service_id =(select service_id from st_lms_service_master where service_display_name='keyGameName') and  game_id=(select game_id from st_dg_game_master where game_name='keyGameId')) map on organization_id=map.agent_org_id where organization_type='AGENT') tr,(select training_exp_default,training_exp_extra,incentive_exp_default  from st_lms_agent_default_daily_training_exp where service_id =(select service_id from st_lms_service_master where service_display_name='keyGameName') and game_id=(select game_id from st_dg_game_master where game_name='keyGameId')) dtr order by orgCode ASC) main where main.orgCode not in (select name orgCode from st_lms_organization_master om inner join st_lms_user_master um on om.organization_id = um.organization_id where um.status ='TERMINATE') group by orgCode

UpdateTrainingExpenseDefaultTrExpense=select training_exp_default from (select organization_id,orgCode,training_exp_default,training_exp_var,training_exp_extra,extra_training_exp_var,incentive_exp_default,incentive_exp_var from (select organization_id, name orgCode  ,ifnull(training_exp_var,0.0) training_exp_var,ifnull(extra_training_exp_var,0.0)extra_training_exp_var,ifnull(incentive_exp_var,0.0) incentive_exp_var from st_lms_organization_master left outer join (select agent_org_id,training_exp_var,extra_training_exp_var,incentive_exp_var from st_lms_agent_daily_trng_exp_var_mapping  where service_id =(select service_id from st_lms_service_master where service_display_name='keyGameName') and  game_id=(select game_id from st_dg_game_master where game_name='keyGameId')) map on organization_id=map.agent_org_id where organization_type='AGENT') tr,(select training_exp_default,training_exp_extra,incentive_exp_default  from st_lms_agent_default_daily_training_exp where service_id =(select service_id from st_lms_service_master where service_display_name='keyGameName') and game_id=(select game_id from st_dg_game_master where game_name='keyGameId')) dtr order by orgCode ASC ) main where main.orgCode not in (select name orgCode from st_lms_organization_master om inner join st_lms_user_master um on om.organization_id = um.organization_id where um.status ='TERMINATE') group by orgCode
UpdateTrainingExpenseVariance=select training_exp_var from (select organization_id,orgCode,training_exp_default,training_exp_var,training_exp_extra,extra_training_exp_var,incentive_exp_default,incentive_exp_var from (select organization_id, name orgCode  ,ifnull(training_exp_var,0.0) training_exp_var,ifnull(extra_training_exp_var,0.0)extra_training_exp_var,ifnull(incentive_exp_var,0.0) incentive_exp_var from st_lms_organization_master left outer join (select agent_org_id,training_exp_var,extra_training_exp_var,incentive_exp_var from st_lms_agent_daily_trng_exp_var_mapping  where service_id =(select service_id from st_lms_service_master where service_display_name='keyGameName') and  game_id=(select game_id from st_dg_game_master where game_name='keyGameId')) map on organization_id=map.agent_org_id where organization_type='AGENT') tr,(select training_exp_default,training_exp_extra,incentive_exp_default  from st_lms_agent_default_daily_training_exp where service_id =(select service_id from st_lms_service_master where service_display_name='keyGameName') and game_id=(select game_id from st_dg_game_master where game_name='keyGameId')) dtr order by orgCode ASC ) main where main.orgCode not in (select name orgCode from st_lms_organization_master om inner join st_lms_user_master um on om.organization_id = um.organization_id where um.status ='TERMINATE') group by orgCode
UpdateTrainingExpenseTotalTrExpence=select (training_exp_default+training_exp_var) from (select organization_id,orgCode,training_exp_default,training_exp_var,training_exp_extra,extra_training_exp_var,incentive_exp_default,incentive_exp_var from (select organization_id, name orgCode  ,ifnull(training_exp_var,0.0) training_exp_var,ifnull(extra_training_exp_var,0.0)extra_training_exp_var,ifnull(incentive_exp_var,0.0) incentive_exp_var from st_lms_organization_master left outer join (select agent_org_id,training_exp_var,extra_training_exp_var,incentive_exp_var from st_lms_agent_daily_trng_exp_var_mapping  where service_id =(select service_id from st_lms_service_master where service_display_name='keyGameName') and  game_id=(select game_id from st_dg_game_master where game_name='keyGameId')) map on organization_id=map.agent_org_id where organization_type='AGENT') tr,(select training_exp_default,training_exp_extra,incentive_exp_default  from st_lms_agent_default_daily_training_exp where service_id =(select service_id from st_lms_service_master where service_display_name='keyGameName') and game_id=(select game_id from st_dg_game_master where game_name='keyGameId')) dtr order by orgCode ASC ) main where main.orgCode not in (select name orgCode from st_lms_organization_master om inner join st_lms_user_master um on om.organization_id = um.organization_id where um.status ='TERMINATE') group by orgCode
UpdateTrainingExpenseDefaultPromotionalTrExpense=select training_exp_extra from (select organization_id,orgCode,training_exp_default,training_exp_var,training_exp_extra,extra_training_exp_var,incentive_exp_default,incentive_exp_var from (select organization_id, name orgCode  ,ifnull(training_exp_var,0.0) training_exp_var,ifnull(extra_training_exp_var,0.0)extra_training_exp_var,ifnull(incentive_exp_var,0.0) incentive_exp_var from st_lms_organization_master left outer join (select agent_org_id,training_exp_var,extra_training_exp_var,incentive_exp_var from st_lms_agent_daily_trng_exp_var_mapping  where service_id =(select service_id from st_lms_service_master where service_display_name='keyGameName') and  game_id=(select game_id from st_dg_game_master where game_name='keyGameId')) map on organization_id=map.agent_org_id where organization_type='AGENT') tr,(select training_exp_default,training_exp_extra,incentive_exp_default  from st_lms_agent_default_daily_training_exp where service_id =(select service_id from st_lms_service_master where service_display_name='keyGameName') and game_id=(select game_id from st_dg_game_master where game_name='keyGameId')) dtr order by orgCode ASC ) main where main.orgCode not in (select name orgCode from st_lms_organization_master om inner join st_lms_user_master um on om.organization_id = um.organization_id where um.status ='TERMINATE') group by orgCode 
UpdateTrainingExpensePromotionalVariance =select extra_training_exp_var from (select organization_id,orgCode,training_exp_default,training_exp_var,training_exp_extra,extra_training_exp_var,incentive_exp_default,incentive_exp_var from (select organization_id, name orgCode  ,ifnull(training_exp_var,0.0) training_exp_var,ifnull(extra_training_exp_var,0.0)extra_training_exp_var,ifnull(incentive_exp_var,0.0) incentive_exp_var from st_lms_organization_master left outer join (select agent_org_id,training_exp_var,extra_training_exp_var,incentive_exp_var from st_lms_agent_daily_trng_exp_var_mapping  where service_id =(select service_id from st_lms_service_master where service_display_name='keyGameName') and  game_id=(select game_id from st_dg_game_master where game_name='keyGameId')) map on organization_id=map.agent_org_id where organization_type='AGENT') tr,(select training_exp_default,training_exp_extra,incentive_exp_default  from st_lms_agent_default_daily_training_exp where service_id =(select service_id from st_lms_service_master where service_display_name='keyGameName') and game_id=(select game_id from st_dg_game_master where game_name='keyGameId')) dtr order by orgCode ASC ) main where main.orgCode not in (select name orgCode from st_lms_organization_master om inner join st_lms_user_master um on om.organization_id = um.organization_id where um.status ='TERMINATE') group by orgCode
UpdateTrainingExpenseTotalPromotionalTrExpense=select extra_training_exp_var from (select organization_id,orgCode,training_exp_default,training_exp_var,training_exp_extra,extra_training_exp_var,incentive_exp_default,incentive_exp_var from (select organization_id, name orgCode  ,ifnull(training_exp_var,0.0) training_exp_var,ifnull(extra_training_exp_var,0.0)extra_training_exp_var,ifnull(incentive_exp_var,0.0) incentive_exp_var from st_lms_organization_master left outer join (select agent_org_id,training_exp_var,extra_training_exp_var,incentive_exp_var from st_lms_agent_daily_trng_exp_var_mapping  where service_id =(select service_id from st_lms_service_master where service_display_name='keyGameName') and  game_id=(select game_id from st_dg_game_master where game_name='keyGameId')) map on organization_id=map.agent_org_id where organization_type='AGENT') tr,(select training_exp_default,training_exp_extra,incentive_exp_default  from st_lms_agent_default_daily_training_exp where service_id =(select service_id from st_lms_service_master where service_display_name='keyGameName') and game_id=(select game_id from st_dg_game_master where game_name='keyGameId')) dtr order by orgCode ASC ) main where main.orgCode not in (select name orgCode from st_lms_organization_master om inner join st_lms_user_master um on om.organization_id = um.organization_id where um.status ='TERMINATE') group by orgCode
UpdateTrainingExpenseData=select training_exp_var from (select organization_id,orgCode,training_exp_default,training_exp_var,training_exp_extra,extra_training_exp_var,incentive_exp_default,incentive_exp_var from (select organization_id, name orgCode  ,ifnull(training_exp_var,0.0) training_exp_var,ifnull(extra_training_exp_var,0.0)extra_training_exp_var,ifnull(incentive_exp_var,0.0) incentive_exp_var from st_lms_organization_master left outer join (select agent_org_id,training_exp_var,extra_training_exp_var,incentive_exp_var from st_lms_agent_daily_trng_exp_var_mapping  where service_id =(select service_id from st_lms_service_master where service_display_name='keyGameName') and  game_id=(select game_id from st_dg_game_master where game_name='keyGameId')) map on organization_id=map.agent_org_id where organization_type='AGENT') tr,(select training_exp_default,training_exp_extra,incentive_exp_default  from st_lms_agent_default_daily_training_exp where service_id =(select service_id from st_lms_service_master where service_display_name='keyGameName') and game_id=(select game_id from st_dg_game_master where game_name='keyGameId')) dtr order by orgCode ASC ) main where main.orgCode not in (select name orgCode from st_lms_organization_master om inner join st_lms_user_master um on om.organization_id = um.organization_id where um.status ='TERMINATE') group by orgCode LIMIT 1

changeblockaction=select block_action from lms_lagos_08122015.st_lms_oranization_limits a inner join lms_lagos_08122015.st_lms_organization_master b on a.organization_id=b.organization_id where organization_type='agent' and organization_status!='TERMINATE' and b.name='Keynewret';

